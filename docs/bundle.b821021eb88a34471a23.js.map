{"version":3,"sources":["webpack:///bundle.b821021eb88a34471a23.js","webpack:///webpack/bootstrap 30ef8fd4a9a305c803dc","webpack:///external \"React\"","webpack:///./event-store.ts","webpack:///external \"ReactDOM\"","webpack:///./~/react-onclickoutside/es/index.js","webpack:///./components/completed-todo-title.tsx","webpack:///./components/todo-title.tsx","webpack:///./read.ts","webpack:///./components/todo-actions-panel-btn-group.tsx","webpack:///./components/todo-delete-btn.tsx","webpack:///./components/todo-panel-btn-group.tsx","webpack:///./components/todo-rename-btn.tsx","webpack:///./components/todo-rename-form.tsx","webpack:///./~/uuid/index.js","webpack:///./~/uuid/lib/bytesToUuid.js","webpack:///./~/uuid/lib/rng-browser.js","webpack:///./components/body.tsx","webpack:///./~/idb/lib/idb.js","webpack:///./~/react-onclickoutside/es/generateOutsideCheck.js","webpack:///./app.tsx","webpack:///./components/completed-todo-actions-panel.tsx","webpack:///./components/completed-todo-list-item.tsx","webpack:///./components/completed-todo-list.tsx","webpack:///./components/completed-todo-panel.tsx","webpack:///./components/completed-todo-rename-panel.tsx","webpack:///./components/event-list-empty.tsx","webpack:///./components/event-list-item.tsx","webpack:///./components/event-list.tsx","webpack:///./components/history-completed-todo-list-item.tsx","webpack:///./components/history-completed-todo-list.tsx","webpack:///./components/history-todo-list-item.tsx","webpack:///./components/history-todo-list-panel.tsx","webpack:///./components/history-todo-list.tsx","webpack:///./components/todo-actions-panel.tsx","webpack:///./components/todo-add-form.tsx","webpack:///./components/todo-list-item.tsx","webpack:///./components/todo-list-panel.tsx","webpack:///./components/todo-list.tsx","webpack:///./components/todo-move-down-btn.tsx","webpack:///./components/todo-move-up-btn.tsx","webpack:///./components/todo-panel.tsx","webpack:///./components/todo-rename-panel.tsx","webpack:///./domain/aggregate-root.ts","webpack:///./domain/events.ts","webpack:///./domain/todo-list.ts","webpack:///./domain/todo.ts","webpack:///./~/uuid/v1.js","webpack:///./~/uuid/v4.js","webpack:///(webpack)/buildin/global.js"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","React","open","__awaiter","this","idb_1","default","dbName","db","oldVersion","createObjectStore","domainEventStoreName","autoIncrement","keyPath","eventIdPropName","createIndex","aggregateIdPropName","allDomainEvents","version","cursorCallback","cursor","events","push","continue","tx","transaction","store","objectStore","iterateCursor","IDBKeyRange","upperBound","complete","domainEventsByAggregate","aggregateId","event","id","index","postDomainEvents","addPromises","e","add","Promise","all","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","DomainEventType","ReactDOM","__webpack_exports__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","writable","setPrototypeOf","__proto__","onClickOutsideHOC","WrappedComponent","config","_class","_temp2","_Component","onClickOutside","_ref","_temp","_this","_ret","_len","arguments","length","args","Array","_key","getPrototypeOf","concat","__outsideClickHandler","enableOnClickOutside","fn","document","props","eventTypes","forEach","eventName","handlerOptions","preventDefault","indexOf","passive","addEventListener","disableOnClickOutside","removeEventListener","getRef","ref","instanceRef","_createClass","key","isReactComponent","getInstance","createElement","handleClickOutside","__clickOutsideHandlerProp","Error","__WEBPACK_IMPORTED_MODULE_0_react__","isPrototypeOf","bind","__WEBPACK_IMPORTED_MODULE_1_react_dom__","addOutsideClickHandler","nextProps","componentNode","removeOutsideClickHandler","__WEBPACK_IMPORTED_MODULE_2__generateOutsideCheck__","outsideClickIgnoreClass","excludeScrollbar","stopPropagation","pos","registeredComponents","handlers","splice","_this2","keys","filter","prop","reduce","wrappedRef","displayName","defaultProps","getClass","defineProperties","target","descriptor","protoProps","staticProps","CompletedTodoTitle","PureComponent","[object Object]","className","title","completionDate","toLocaleDateString","TodoTitle","todoListEvents","event_store_1","lists","todoLists","todoListId","type","TodoAdded","react_onclickoutside_1","TodoActionsPanelBtnGroupInner","super","showDefaultPanel","role","children","TodoActionsPanelBtnGroup","TodoDeleteBtn","onClick","deleteTodo","aria-label","aria-hidden","TodoPanelBtnGroup","showActionsPanel","TodoRenameBtn","showRenamePanel","TodoRenameFormInner","onChange","setState","onSubmit","renameTodo","state","todo","inputId","htmlFor","required","TodoRenameForm","v1","v4","uuid","bytesToUuid","buf","offset","bth","byteToHex","toString","substr","global","rng","crypto","msCrypto","getRandomValues","rnds8","Uint8Array","rnds","r","Math","random","uuid_1","todo_list_1","read_1","event_list_1","event_list_empty_1","history_todo_list_panel_1","todo_list_panel_1","Body","updateDomainTodoList","command","todoList","TodoList","uncommittedEvents","addTodo","list","catch","console","log","completeTodo","Date","now","uncompleteTodo","uncomplete","remove","moveTodoUp","changePosition","moveTodoDown","renametodo","rename","showHistoryVersion","history","historyVersion","showCurrentVersion","slice","HistoryTodoListPanel","todos","completedTodos","TodoListPanel","EventList","EventListEmpty","toArray","arr","promisifyRequest","request","onsuccess","onerror","error","promisifyRequestCall","obj","method","promisifyCursorRequestCall","Cursor","proxyProperties","ProxyClass","targetProp","properties","set","val","proxyRequestMethods","proxyMethods","proxyCursorRequestMethods","Index","_index","_cursor","_request","ObjectStore","_store","Transaction","idbTransaction","_tx","oncomplete","onabort","UpgradeDB","_db","DB","IDBIndex","IDBCursor","methodName","IDBObjectStore","IDBTransaction","IDBDatabase","funcName","replace","callback","nativeObject","getAll","query","count","items","undefined","exp","upgradeCallback","indexedDB","onupgradeneeded","delete","isNodeFound","current","ignoreClass","correspondingElement","classList","contains","findHighest","parentNode","clickedScrollbar","evt","documentElement","clientWidth","clientX","clientHeight","clientY","generateOutsideCheck","eventHandler","body_1","window","alert","render","getElementById","completed_todo_title_1","todo_actions_panel_btn_group_1","todo_delete_btn_1","todo_rename_btn_1","CompletedTodoActionsPanel","completionTimestamp","completed_todo_actions_panel_1","completed_todo_panel_1","completed_todo_rename_panel_1","PanelType","CompletedTodoListItem","panel","DefaultPanel","ActionsPanel","RenamePanel","CompletedTodoPanel","CompletedTodoRenamePanel","completed_todo_list_item_1","CompletedTodoList","map","react_dom_1","todo_panel_btn_group_1","btnGroupRef","comp","btnGroup","findDOMNode","todo_rename_form_1","assign","EventListItem","showHistory","event_list_item_1","EventListInner","HistoryCompletedTodoListItem","history_completed_todo_list_item_1","HistoryCompletedTodoList","todo_title_1","HistoryTodoListItem","history_completed_todo_list_1","history_todo_list_1","HistoryTodoList","history_todo_list_item_1","todo_move_down_btn_1","todo_move_up_btn_1","TodoActionsPanel","TodoMoveUpBtn","TodoMoveDownBtn","TodoAddForm","reset","placeholder","todo_actions_panel_1","todo_panel_1","todo_rename_panel_1","TodoListItem","TodoPanel","TodoRenamePanel","completed_todo_list_1","todo_add_form_1","todo_list_item_1","AggregateRoot","_uncommittedEvents","_id","init","todoId","todoName","TodoRemoved","TodoCompleted","todoCompletionTimestamp","TodoUncompleted","TodoRenamed","TodoPositionChanged","todoOffset","aggregate_root_1","events_1","todo_1","_todos","x","isCompleted","sort","y","Todo","findIndex","oldTodo","newTodo","CompletedTodo","find","arraySwap","a","incompleteTodoPositions","from","to","agId","applyAndStage","options","b","clockseq","_clockseq","msecs","getTime","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","node","_nodeId","_seedBytes","ii","g","Function","eval"],"mappings":"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","file":"bundle.b821021eb88a34471a23.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 19);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = React;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst idb_1 = __webpack_require__(17);\r\nvar DomainEventType;\r\n(function (DomainEventType) {\r\n    DomainEventType[DomainEventType[\"TodoAdded\"] = 0] = \"TodoAdded\";\r\n    DomainEventType[DomainEventType[\"TodoRemoved\"] = 1] = \"TodoRemoved\";\r\n    DomainEventType[DomainEventType[\"TodoCompleted\"] = 2] = \"TodoCompleted\";\r\n    DomainEventType[DomainEventType[\"TodoUncompleted\"] = 3] = \"TodoUncompleted\";\r\n    DomainEventType[DomainEventType[\"TodoRenamed\"] = 4] = \"TodoRenamed\";\r\n    DomainEventType[DomainEventType[\"TodoPositionChanged\"] = 5] = \"TodoPositionChanged\";\r\n})(DomainEventType = exports.DomainEventType || (exports.DomainEventType = {}));\r\nconst dbName = \"estd-db\";\r\nconst domainEventStoreName = \"domain-event\";\r\nconst aggregateIdPropName = \"aggregateId\";\r\nconst eventIdPropName = \"id\";\r\nfunction open() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        return yield idb_1.default.open(dbName, 1, db => {\r\n            switch (db.oldVersion) {\r\n                case 0:\r\n                    db.createObjectStore(domainEventStoreName, { autoIncrement: true, keyPath: eventIdPropName })\r\n                        .createIndex(aggregateIdPropName, aggregateIdPropName);\r\n            }\r\n        });\r\n    });\r\n}\r\nfunction allDomainEvents(version) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let db = yield open();\r\n        let events = [];\r\n        let tx = db.transaction(domainEventStoreName);\r\n        let store = tx.objectStore(domainEventStoreName);\r\n        function cursorCallback(cursor) {\r\n            if (!cursor) {\r\n                return;\r\n            }\r\n            events.push(cursor.value);\r\n            // tslint:disable-next-line:no-floating-promises\r\n            cursor.continue();\r\n        }\r\n        // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n        if (version) {\r\n            store.iterateCursor(IDBKeyRange.upperBound(version), cursorCallback);\r\n        }\r\n        else {\r\n            store.iterateCursor(cursorCallback);\r\n        }\r\n        yield tx.complete;\r\n        return events;\r\n    });\r\n}\r\nexports.allDomainEvents = allDomainEvents;\r\nfunction domainEventsByAggregate(aggregateId, version) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let db = yield open();\r\n        let events = [];\r\n        let tx = db.transaction(domainEventStoreName);\r\n        let index = tx.objectStore(domainEventStoreName).index(aggregateIdPropName);\r\n        function cursorCallback(cursor) {\r\n            if (!cursor) {\r\n                return;\r\n            }\r\n            let event = cursor.value;\r\n            if (!version || event.id <= version) {\r\n                events.push(event);\r\n            }\r\n            // tslint:disable-next-line:no-floating-promises\r\n            cursor.continue();\r\n        }\r\n        // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n        index.iterateCursor(aggregateId, cursorCallback);\r\n        yield tx.complete;\r\n        return events;\r\n    });\r\n}\r\nexports.domainEventsByAggregate = domainEventsByAggregate;\r\nfunction postDomainEvents(events) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let db = yield open();\r\n        let tx = db.transaction(domainEventStoreName, \"readwrite\");\r\n        let store = tx.objectStore(domainEventStoreName);\r\n        let addPromises = [];\r\n        for (const e of events) {\r\n            addPromises.push(store.add(e));\r\n        }\r\n        yield Promise.all(addPromises);\r\n        yield tx.complete;\r\n    });\r\n}\r\nexports.postDomainEvents = postDomainEvents;\r\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\nmodule.exports = ReactDOM;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony export (immutable) */ __webpack_exports__[\"default\"] = onClickOutsideHOC;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__generateOutsideCheck__ = __webpack_require__(18);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n/**\n * A higher-order-component for handling onClickOutside for React components.\n */\nvar registeredComponents = [];\nvar handlers = [];\n\n/**\n * This function generates the HOC function that you'll use\n * in order to impart onOutsideClick listening to an\n * arbitrary component. It gets called at the end of the\n * bootstrapping code to yield an instance of the\n * onClickOutsideHOC function defined inside setupHOC().\n */\nfunction onClickOutsideHOC(WrappedComponent, config) {\n  var _class, _temp2;\n\n  return _temp2 = _class = function (_Component) {\n    _inherits(onClickOutside, _Component);\n\n    function onClickOutside() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, onClickOutside);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = onClickOutside.__proto__ || Object.getPrototypeOf(onClickOutside)).call.apply(_ref, [this].concat(args))), _this), _this.__outsideClickHandler = null, _this.enableOnClickOutside = function () {\n        var fn = _this.__outsideClickHandler;\n        if (fn && typeof document !== 'undefined') {\n          var events = _this.props.eventTypes;\n          if (!events.forEach) {\n            events = [events];\n          }\n          events.forEach(function (eventName) {\n            var handlerOptions = !_this.props.preventDefault && ['touchstart', 'touchmove'].indexOf(eventName) !== -1 ? { passive: true } : null;\n            document.addEventListener(eventName, fn, handlerOptions);\n          });\n        }\n      }, _this.disableOnClickOutside = function () {\n        var fn = _this.__outsideClickHandler;\n        if (fn && typeof document !== 'undefined') {\n          var events = _this.props.eventTypes;\n          if (!events.forEach) {\n            events = [events];\n          }\n          events.forEach(function (eventName) {\n            return document.removeEventListener(eventName, fn);\n          });\n        }\n      }, _this.getRef = function (ref) {\n        return _this.instanceRef = ref;\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(onClickOutside, [{\n      key: 'getInstance',\n\n\n      /**\n       * Access the WrappedComponent's instance.\n       */\n      value: function getInstance() {\n        if (!WrappedComponent.prototype.isReactComponent) {\n          return this;\n        }\n        var ref = this.instanceRef;\n        return ref.getInstance ? ref.getInstance() : ref;\n      }\n\n      // this is given meaning in componentDidMount/componentDidUpdate\n\n    }, {\n      key: 'componentDidMount',\n\n\n      /**\n       * Add click listeners to the current document,\n       * linked to this component's state.\n       */\n      value: function componentDidMount() {\n        // If we are in an environment without a DOM such\n        // as shallow rendering or snapshots then we exit\n        // early to prevent any unhandled errors being thrown.\n        if (typeof document === 'undefined' || !document.createElement) {\n          return;\n        }\n\n        var instance = this.getInstance();\n\n        if (config && typeof config.handleClickOutside === 'function') {\n          this.__clickOutsideHandlerProp = config.handleClickOutside(instance);\n          if (typeof this.__clickOutsideHandlerProp !== 'function') {\n            throw new Error('WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.');\n          }\n        } else if (typeof instance.handleClickOutside === 'function') {\n          if (__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"].prototype.isPrototypeOf(instance)) {\n            this.__clickOutsideHandlerProp = instance.handleClickOutside.bind(instance);\n          } else {\n            this.__clickOutsideHandlerProp = instance.handleClickOutside;\n          }\n        } else if (typeof instance.props.handleClickOutside === 'function') {\n          this.__clickOutsideHandlerProp = instance.props.handleClickOutside;\n        } else {\n          throw new Error('WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.');\n        }\n\n        // TODO: try to get rid of this, could be done with function ref, might be problematic for SFC though, they do not expose refs\n        if (__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_react_dom__[\"findDOMNode\"])(instance) === null) {\n          return;\n        }\n\n        this.addOutsideClickHandler();\n      }\n\n      /**\n      * Track for disableOnClickOutside props changes and enable/disable click outside\n      */\n\n    }, {\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        if (this.props.disableOnClickOutside && !nextProps.disableOnClickOutside) {\n          this.enableOnClickOutside();\n        } else if (!this.props.disableOnClickOutside && nextProps.disableOnClickOutside) {\n          this.disableOnClickOutside();\n        }\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate() {\n        var componentNode = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_react_dom__[\"findDOMNode\"])(this.getInstance());\n\n        if (componentNode === null && this.__outsideClickHandler) {\n          this.removeOutsideClickHandler();\n          return;\n        }\n\n        if (componentNode !== null && !this.__outsideClickHandler) {\n          this.addOutsideClickHandler();\n          return;\n        }\n      }\n\n      /**\n       * Remove all document's event listeners for this component\n       */\n\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this.removeOutsideClickHandler();\n      }\n\n      /**\n       * Can be called to explicitly enable event listening\n       * for clicks and touches outside of this element.\n       */\n\n\n      /**\n       * Can be called to explicitly disable event listening\n       * for clicks and touches outside of this element.\n       */\n\n    }, {\n      key: 'addOutsideClickHandler',\n      value: function addOutsideClickHandler() {\n        var fn = this.__outsideClickHandler = __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__generateOutsideCheck__[\"a\" /* default */])(__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_react_dom__[\"findDOMNode\"])(this.getInstance()), this.__clickOutsideHandlerProp, this.props.outsideClickIgnoreClass, this.props.excludeScrollbar, this.props.preventDefault, this.props.stopPropagation);\n\n        var pos = registeredComponents.length;\n        registeredComponents.push(this);\n        handlers[pos] = fn;\n\n        // If there is a truthy disableOnClickOutside property for this\n        // component, don't immediately start listening for outside events.\n        if (!this.props.disableOnClickOutside) {\n          this.enableOnClickOutside();\n        }\n      }\n    }, {\n      key: 'removeOutsideClickHandler',\n      value: function removeOutsideClickHandler() {\n        this.disableOnClickOutside();\n        this.__outsideClickHandler = false;\n\n        var pos = registeredComponents.indexOf(this);\n\n        if (pos > -1) {\n          // clean up so we don't leak memory\n          if (handlers[pos]) {\n            handlers.splice(pos, 1);\n          }\n          registeredComponents.splice(pos, 1);\n        }\n      }\n    }, {\n      key: 'render',\n\n\n      /**\n       * Pass-through render\n       */\n      value: function render() {\n        var _this2 = this;\n\n        var props = Object.keys(this.props).filter(function (prop) {\n          return prop !== 'excludeScrollbar';\n        }).reduce(function (props, prop) {\n          props[prop] = _this2.props[prop];\n          return props;\n        }, {});\n\n        if (WrappedComponent.prototype.isReactComponent) {\n          props.ref = this.getRef;\n        } else {\n          props.wrappedRef = this.getRef;\n        }\n\n        props.disableOnClickOutside = this.disableOnClickOutside;\n        props.enableOnClickOutside = this.enableOnClickOutside;\n\n        return __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_0_react__[\"createElement\"])(WrappedComponent, props);\n      }\n    }]);\n\n    return onClickOutside;\n  }(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]), _class.displayName = 'OnClickOutside(' + (WrappedComponent.displayName || WrappedComponent.name || 'Component') + ')', _class.defaultProps = {\n    eventTypes: ['mousedown', 'touchstart'],\n    excludeScrollbar: config && config.excludeScrollbar || false,\n    outsideClickIgnoreClass: 'ignore-react-onclickoutside',\n    preventDefault: false,\n    stopPropagation: false\n  }, _class.getClass = function () {\n    return WrappedComponent.getClass ? WrappedComponent.getClass() : WrappedComponent;\n  }, _temp2;\n}\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass CompletedTodoTitle extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"todo-list-todo-title\" },\r\n            this.props.title,\r\n            React.createElement(\"br\", null),\r\n            React.createElement(\"small\", null,\r\n                \"Completed on \",\r\n                this.props.completionDate.toLocaleDateString())));\r\n    }\r\n}\r\nexports.CompletedTodoTitle = CompletedTodoTitle;\r\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass TodoTitle extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"todo-list-todo-title\" }, this.props.title));\r\n    }\r\n}\r\nexports.TodoTitle = TodoTitle;\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst event_store_1 = __webpack_require__(1);\r\nfunction todoListEvents() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        // This app's domain and event-store are designed to accommodate multiple aggregates of different types.\r\n        // Currently, the app only has one aggregate type (TodoList) and only allows the user to have one instance of that aggregate.\r\n        // This todoLists() lookup occurs to get the aggregateId of the user's one TodoList.\r\n        let events = yield event_store_1.allDomainEvents();\r\n        let lists = todoLists(events);\r\n        return (lists.length)\r\n            ? yield event_store_1.domainEventsByAggregate(lists[0])\r\n            : [];\r\n    });\r\n}\r\nexports.todoListEvents = todoListEvents;\r\nfunction todoListId() {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        // This app's domain and event-store are designed to accommodate multiple aggregates of different types.\r\n        // Currently, the app only has one aggregate type (TodoList) and only allows the user to have one instance of that aggregate.\r\n        // This todoLists() lookup occurs to get the aggregateId of the user's one TodoList.\r\n        let events = yield event_store_1.allDomainEvents();\r\n        let lists = todoLists(events);\r\n        return (lists.length)\r\n            ? lists[0]\r\n            : null;\r\n    });\r\n}\r\nexports.todoListId = todoListId;\r\nfunction todoLists(events) {\r\n    return events.reduce((p, c) => {\r\n        if (c.type === event_store_1.DomainEventType.TodoAdded && p.indexOf(c.aggregateId) === -1) {\r\n            p.push(c.aggregateId);\r\n        }\r\n        return p;\r\n    }, []);\r\n}\r\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst react_onclickoutside_1 = __webpack_require__(3);\r\nclass TodoActionsPanelBtnGroupInner extends React.PureComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.handleClickOutside = () => {\r\n            this.props.showDefaultPanel();\r\n        };\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"todo-list-todo-btn-group\" },\r\n            React.createElement(\"div\", { className: \"btn-group\", role: \"group\" }, this.props.children)));\r\n    }\r\n}\r\nexports.TodoActionsPanelBtnGroup = react_onclickoutside_1.default(TodoActionsPanelBtnGroupInner);\r\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass TodoDeleteBtn extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"button\", { onClick: this.props.deleteTodo, type: \"button\", className: \"btn btn-link\", \"aria-label\": \"Delete\" },\r\n            React.createElement(\"span\", { className: \"glyphicon glyphicon-trash\", \"aria-hidden\": \"true\" })));\r\n    }\r\n}\r\nexports.TodoDeleteBtn = TodoDeleteBtn;\r\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass TodoPanelBtnGroup extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"todo-list-todo-btn-group\" },\r\n            React.createElement(\"button\", { onClick: this.props.showActionsPanel, type: \"button\", className: \"btn btn-link\", \"aria-label\": \"Actions\" },\r\n                React.createElement(\"span\", { className: \"glyphicon glyphicon-cog\", \"aria-hidden\": \"true\" }))));\r\n    }\r\n}\r\nexports.TodoPanelBtnGroup = TodoPanelBtnGroup;\r\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass TodoRenameBtn extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"button\", { onClick: this.props.showRenamePanel, type: \"button\", className: \"btn btn-link\", \"aria-label\": \"Rename\" },\r\n            React.createElement(\"span\", { className: \"glyphicon glyphicon-pencil\", \"aria-hidden\": \"true\" })));\r\n    }\r\n}\r\nexports.TodoRenameBtn = TodoRenameBtn;\r\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst react_onclickoutside_1 = __webpack_require__(3);\r\nclass TodoRenameFormInner extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleClickOutside = () => {\r\n            this.props.showDefaultPanel();\r\n        };\r\n        this.onChange = e => {\r\n            this.setState({ value: e.target.value });\r\n        };\r\n        this.onSubmit = e => {\r\n            e.preventDefault();\r\n            this.props.renameTodo(this.state.value);\r\n            this.props.showDefaultPanel();\r\n        };\r\n        this.state = {\r\n            value: this.props.todo.name,\r\n        };\r\n    }\r\n    render() {\r\n        let inputId = \"todoRenameInput-\" + this.props.todo.id;\r\n        return (React.createElement(\"form\", { role: \"form\", onSubmit: this.onSubmit },\r\n            React.createElement(\"label\", { htmlFor: inputId, className: \"sr-only\" }, \"New Name\"),\r\n            React.createElement(\"div\", { className: \"input-group\" },\r\n                React.createElement(\"input\", { id: inputId, name: \"name\", type: \"text\", className: \"form-control\", onChange: this.onChange, value: this.state.value, required: true }),\r\n                React.createElement(\"span\", { className: \"input-group-btn\" },\r\n                    React.createElement(\"button\", { type: \"submit\", className: \"btn btn-success\", \"aria-label\": \"Rename To-do\" },\r\n                        React.createElement(\"span\", { className: \"glyphicon glyphicon-pencil\", \"aria-hidden\": \"true\" }))))));\r\n    }\r\n}\r\nexports.TodoRenameForm = react_onclickoutside_1.default(TodoRenameFormInner);\r\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar v1 = __webpack_require__(46);\nvar v4 = __webpack_require__(47);\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports) {\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/* WEBPACK VAR INJECTION */(function(global) {// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(48)))\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst uuid_1 = __webpack_require__(12);\r\nconst todo_list_1 = __webpack_require__(44);\r\nconst event_store_1 = __webpack_require__(1);\r\nconst read_1 = __webpack_require__(6);\r\nconst event_list_1 = __webpack_require__(27);\r\nconst event_list_empty_1 = __webpack_require__(25);\r\nconst history_todo_list_panel_1 = __webpack_require__(31);\r\nconst todo_list_panel_1 = __webpack_require__(36);\r\nclass Body extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.updateDomainTodoList = (command) => __awaiter(this, void 0, void 0, function* () {\r\n            let events = (this.state.todoListId)\r\n                ? yield event_store_1.domainEventsByAggregate(this.state.todoListId)\r\n                : yield read_1.todoListEvents();\r\n            let todoList = new todo_list_1.TodoList(events);\r\n            command(todoList);\r\n            yield event_store_1.postDomainEvents(todoList.uncommittedEvents);\r\n            this.setState({\r\n                todoListId: todoList.id,\r\n                events: yield event_store_1.domainEventsByAggregate(todoList.id),\r\n            });\r\n        });\r\n        this.addTodo = (name) => {\r\n            this.updateDomainTodoList(list => { list.add(uuid_1.v4(), name); })\r\n                .catch(console.log);\r\n        };\r\n        this.completeTodo = (id) => {\r\n            this.updateDomainTodoList(list => { list.complete(id, Date.now()); })\r\n                .catch(console.log);\r\n        };\r\n        this.uncompleteTodo = (id) => {\r\n            this.updateDomainTodoList(list => { list.uncomplete(id); })\r\n                .catch(console.log);\r\n        };\r\n        this.deleteTodo = (id) => {\r\n            this.updateDomainTodoList(list => { list.remove(id); })\r\n                .catch(console.log);\r\n        };\r\n        this.moveTodoUp = (id) => {\r\n            this.updateDomainTodoList(list => { list.changePosition(id, -1); })\r\n                .catch(console.log);\r\n        };\r\n        this.moveTodoDown = (id) => {\r\n            this.updateDomainTodoList(list => { list.changePosition(id, 1); })\r\n                .catch(console.log);\r\n        };\r\n        this.renametodo = (id, name) => {\r\n            this.updateDomainTodoList(list => { list.rename(id, name); })\r\n                .catch(console.log);\r\n        };\r\n        this.showHistoryVersion = (version) => {\r\n            this.setState({ history: true, historyVersion: version });\r\n        };\r\n        this.showCurrentVersion = () => {\r\n            event_store_1.domainEventsByAggregate(this.state.todoListId)\r\n                .then(events => { this.setState({ events, history: false, historyVersion: 0 }); })\r\n                .catch(console.log);\r\n        };\r\n        this.state = {\r\n            todoListId: props.todoListId,\r\n            events: [],\r\n            history: false,\r\n            historyVersion: 0,\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        if (this.state.todoListId) {\r\n            event_store_1.domainEventsByAggregate(this.state.todoListId)\r\n                .then(events => { this.setState({ events }); })\r\n                .catch(console.log);\r\n        }\r\n    }\r\n    render() {\r\n        let todoList = new todo_list_1.TodoList(this.state.history\r\n            ? this.state.events.slice(0, this.state.historyVersion)\r\n            : this.state.events);\r\n        return (React.createElement(\"div\", { className: \"container\" },\r\n            React.createElement(\"div\", { className: \"row\" },\r\n                React.createElement(\"div\", { className: \"col-sm-8\" }, this.state.history\r\n                    ? React.createElement(history_todo_list_panel_1.HistoryTodoListPanel, { todos: todoList.todos, completedTodos: todoList.completedTodos })\r\n                    : React.createElement(todo_list_panel_1.TodoListPanel, { todos: todoList.todos, completedTodos: todoList.completedTodos, addTodo: this.addTodo, completeTodo: this.completeTodo, uncompleteTodo: this.uncompleteTodo, deleteTodo: this.deleteTodo, moveTodoUp: this.moveTodoUp, moveTodoDown: this.moveTodoDown, renameTodo: this.renametodo })),\r\n                React.createElement(\"div\", { className: \"col-sm-4\" },\r\n                    React.createElement(\"h3\", null, \"Domain Events\"),\r\n                    this.state.events.length\r\n                        ? React.createElement(event_list_1.EventList, { disableOnClickOutside: !this.state.history, events: this.state.events, showHistoryVersion: this.showHistoryVersion, showCurrentVersion: this.showCurrentVersion })\r\n                        : React.createElement(event_list_empty_1.EventListEmpty, null))),\r\n            React.createElement(\"footer\", null,\r\n                React.createElement(\"p\", null, \"\\u00A9 2017 - Jon Brian Skog\"))));\r\n    }\r\n}\r\nexports.Body = Body;\r\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      request.onupgradeneeded = function(event) {\n        if (upgradeCallback) {\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n        }\n      };\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (true) {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = generateOutsideCheck;\n/**\n * Check whether some DOM node is our Component's node.\n */\nfunction isNodeFound(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  }\n  // SVG <use/> elements do not technically reside in the rendered DOM, so\n  // they do not have classList directly, but they offer a link to their\n  // corresponding element, which can have classList. This extra check is for\n  // that case.\n  // See: http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGUseElement\n  // Discussion: https://github.com/Pomax/react-onclickoutside/pull/17\n  if (current.correspondingElement) {\n    return current.correspondingElement.classList.contains(ignoreClass);\n  }\n  return current.classList.contains(ignoreClass);\n}\n\n/**\n * Try to find our node in a hierarchy of nodes, returning the document\n * node as highest node if our node is not found in the path up.\n */\nfunction findHighest(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  }\n\n  // If source=local then this event came from 'somewhere'\n  // inside and should be ignored. We could handle this with\n  // a layered approach, too, but that requires going back to\n  // thinking in terms of Dom node nesting, running counter\n  // to React's 'you shouldn't care about the DOM' philosophy.\n  while (current.parentNode) {\n    if (isNodeFound(current, componentNode, ignoreClass)) {\n      return true;\n    }\n    current = current.parentNode;\n  }\n  return current;\n}\n\n/**\n * Check if the browser scrollbar was clicked\n */\nfunction clickedScrollbar(evt) {\n  return document.documentElement.clientWidth <= evt.clientX || document.documentElement.clientHeight <= evt.clientY;\n}\n\n/**\n * Generate the event handler that checks whether a clicked DOM node\n * is inside of, or lives outside of, our Component's node tree.\n */\nfunction generateOutsideCheck(componentNode, eventHandler, ignoreClass, excludeScrollbar, preventDefault, stopPropagation) {\n  return function (evt) {\n    if (preventDefault) {\n      evt.preventDefault();\n    }\n    if (stopPropagation) {\n      evt.stopPropagation();\n    }\n    var current = evt.target;\n    if (excludeScrollbar && clickedScrollbar(evt) || findHighest(current, componentNode, ignoreClass) !== document) {\n      return;\n    }\n    eventHandler(evt);\n  };\n}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst ReactDOM = __webpack_require__(2);\r\nconst body_1 = __webpack_require__(16);\r\nconst read_1 = __webpack_require__(6);\r\n__webpack_require__(15);\r\nif (!window.indexedDB) {\r\n    window.alert(\"Your browser doesn't support IndexedDB (the browser feature this app uses to store your To-dos). Update your browser to its latest version.\");\r\n}\r\nread_1.todoListId()\r\n    .then(id => {\r\n    ReactDOM.render(React.createElement(body_1.Body, { todoListId: id }), document.getElementById(\"app\"));\r\n}).catch(console.log);\r\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst completed_todo_title_1 = __webpack_require__(4);\r\nconst todo_actions_panel_btn_group_1 = __webpack_require__(7);\r\nconst todo_delete_btn_1 = __webpack_require__(8);\r\nconst todo_rename_btn_1 = __webpack_require__(10);\r\nclass CompletedTodoActionsPanel extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group-item list-group-item-success\" },\r\n            React.createElement(\"div\", { className: \"todo-list-todo-panel\" },\r\n                React.createElement(completed_todo_title_1.CompletedTodoTitle, { title: this.props.todo.name, completionDate: new Date(this.props.todo.completionTimestamp) }),\r\n                React.createElement(todo_actions_panel_btn_group_1.TodoActionsPanelBtnGroup, { showDefaultPanel: this.props.showDefaultPanel },\r\n                    React.createElement(todo_delete_btn_1.TodoDeleteBtn, { deleteTodo: this.props.deleteTodo }),\r\n                    React.createElement(todo_rename_btn_1.TodoRenameBtn, { showRenamePanel: this.props.showRenamePanel })))));\r\n    }\r\n}\r\nexports.CompletedTodoActionsPanel = CompletedTodoActionsPanel;\r\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst completed_todo_actions_panel_1 = __webpack_require__(20);\r\nconst completed_todo_panel_1 = __webpack_require__(23);\r\nconst completed_todo_rename_panel_1 = __webpack_require__(24);\r\nvar PanelType;\r\n(function (PanelType) {\r\n    PanelType[PanelType[\"DefaultPanel\"] = 0] = \"DefaultPanel\";\r\n    PanelType[PanelType[\"ActionsPanel\"] = 1] = \"ActionsPanel\";\r\n    PanelType[PanelType[\"RenamePanel\"] = 2] = \"RenamePanel\";\r\n})(PanelType || (PanelType = {}));\r\nclass CompletedTodoListItem extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.uncompleteTodo = () => {\r\n            this.props.uncompleteTodo(this.props.todo.id);\r\n        };\r\n        this.deleteTodo = () => {\r\n            this.props.deleteTodo(this.props.todo.id);\r\n        };\r\n        this.renameTodo = (name) => {\r\n            this.props.renameTodo(this.props.todo.id, name);\r\n        };\r\n        this.showDefaultPanel = () => {\r\n            this.setState({\r\n                panel: PanelType.DefaultPanel\r\n            });\r\n        };\r\n        this.showActionsPanel = () => {\r\n            this.setState({\r\n                panel: PanelType.ActionsPanel\r\n            });\r\n        };\r\n        this.showRenamePanel = () => {\r\n            this.setState({\r\n                panel: PanelType.RenamePanel\r\n            });\r\n        };\r\n        this.state = {\r\n            panel: PanelType.DefaultPanel\r\n        };\r\n    }\r\n    render() {\r\n        let panel;\r\n        switch (this.state.panel) {\r\n            case PanelType.DefaultPanel: {\r\n                panel =\r\n                    React.createElement(completed_todo_panel_1.CompletedTodoPanel, { todo: this.props.todo, uncompleteTodo: this.uncompleteTodo, showActionsPanel: this.showActionsPanel });\r\n                break;\r\n            }\r\n            case PanelType.ActionsPanel: {\r\n                panel =\r\n                    React.createElement(completed_todo_actions_panel_1.CompletedTodoActionsPanel, { todo: this.props.todo, deleteTodo: this.deleteTodo, showDefaultPanel: this.showDefaultPanel, showRenamePanel: this.showRenamePanel });\r\n                break;\r\n            }\r\n            case PanelType.RenamePanel: {\r\n                panel =\r\n                    React.createElement(completed_todo_rename_panel_1.CompletedTodoRenamePanel, { todo: this.props.todo, renameTodo: this.renameTodo, showDefaultPanel: this.showDefaultPanel });\r\n                break;\r\n            }\r\n            default: {\r\n                panel = null;\r\n                break;\r\n            }\r\n        }\r\n        return panel;\r\n    }\r\n}\r\nexports.CompletedTodoListItem = CompletedTodoListItem;\r\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst completed_todo_list_item_1 = __webpack_require__(21);\r\nclass CompletedTodoList extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group\" }, this.props.todos.map(todo => React.createElement(completed_todo_list_item_1.CompletedTodoListItem, { key: todo.id, todo: todo, uncompleteTodo: this.props.uncompleteTodo, deleteTodo: this.props.deleteTodo, renameTodo: this.props.renameTodo }))));\r\n    }\r\n}\r\nexports.CompletedTodoList = CompletedTodoList;\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst react_dom_1 = __webpack_require__(2);\r\nconst completed_todo_title_1 = __webpack_require__(4);\r\nconst todo_panel_btn_group_1 = __webpack_require__(9);\r\nclass CompletedTodoPanel extends React.PureComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.btnGroupRef = comp => {\r\n            if (comp) {\r\n                this.btnGroup = react_dom_1.findDOMNode(comp);\r\n            }\r\n        };\r\n        this.onClick = e => {\r\n            if (!this.btnGroup.contains(e.target)) {\r\n                this.props.uncompleteTodo();\r\n            }\r\n        };\r\n    }\r\n    render() {\r\n        return (React.createElement(\"a\", { onClick: this.onClick, className: \"list-group-item list-group-item-success\" },\r\n            React.createElement(\"div\", { className: \"todo-list-todo-panel\" },\r\n                React.createElement(completed_todo_title_1.CompletedTodoTitle, { title: this.props.todo.name, completionDate: new Date(this.props.todo.completionTimestamp) }),\r\n                React.createElement(todo_panel_btn_group_1.TodoPanelBtnGroup, { ref: this.btnGroupRef, showActionsPanel: this.props.showActionsPanel }))));\r\n    }\r\n}\r\nexports.CompletedTodoPanel = CompletedTodoPanel;\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst todo_rename_form_1 = __webpack_require__(11);\r\nclass CompletedTodoRenamePanel extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group-item list-group-item-success\" },\r\n            React.createElement(todo_rename_form_1.TodoRenameForm, Object.assign({}, this.props))));\r\n    }\r\n}\r\nexports.CompletedTodoRenamePanel = CompletedTodoRenamePanel;\r\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nexports.EventListEmpty = () => React.createElement(\"p\", null,\r\n    React.createElement(\"span\", { className: \"glyphicon glyphicon-exclamation-sign\", \"aria-hidden\": \"true\" }),\r\n    \" Add some to-dos to see events\");\r\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst event_store_1 = __webpack_require__(1);\r\nclass EventListItem extends React.PureComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.showHistory = e => {\r\n            this.props.showHistoryVersion(this.props.event.id);\r\n        };\r\n    }\r\n    render() {\r\n        return (React.createElement(\"button\", { onClick: this.showHistory, className: \"list-group-item event-list-item\" },\r\n            this.props.event.id,\r\n            \" : \",\r\n            event_store_1.DomainEventType[this.props.event.type]));\r\n    }\r\n}\r\nexports.EventListItem = EventListItem;\r\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst react_onclickoutside_1 = __webpack_require__(3);\r\nconst event_list_item_1 = __webpack_require__(26);\r\nclass EventListInner extends React.PureComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.handleClickOutside = () => {\r\n            this.props.showCurrentVersion();\r\n        };\r\n    }\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group\" }, this.props.events.map(event => React.createElement(event_list_item_1.EventListItem, { key: event.id, event: event, showHistoryVersion: this.props.showHistoryVersion }))));\r\n    }\r\n}\r\nexports.EventListInner = EventListInner;\r\nexports.EventList = react_onclickoutside_1.default(EventListInner);\r\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst completed_todo_title_1 = __webpack_require__(4);\r\nclass HistoryCompletedTodoListItem extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group-item list-group-item-success\" },\r\n            React.createElement(\"div\", { className: \"todo-list-todo-panel\" },\r\n                React.createElement(completed_todo_title_1.CompletedTodoTitle, { title: this.props.todo.name, completionDate: new Date(this.props.todo.completionTimestamp) }))));\r\n    }\r\n}\r\nexports.HistoryCompletedTodoListItem = HistoryCompletedTodoListItem;\r\n\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst history_completed_todo_list_item_1 = __webpack_require__(28);\r\nclass HistoryCompletedTodoList extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group\" }, this.props.todos.map(todo => React.createElement(history_completed_todo_list_item_1.HistoryCompletedTodoListItem, { key: todo.id, todo: todo }))));\r\n    }\r\n}\r\nexports.HistoryCompletedTodoList = HistoryCompletedTodoList;\r\n\n\n/***/ }),\n/* 30 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst todo_title_1 = __webpack_require__(5);\r\nclass HistoryTodoListItem extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group-item\" },\r\n            React.createElement(\"div\", { className: \"todo-list-todo-panel\" },\r\n                React.createElement(todo_title_1.TodoTitle, { title: this.props.todo.name }))));\r\n    }\r\n}\r\nexports.HistoryTodoListItem = HistoryTodoListItem;\r\n\n\n/***/ }),\n/* 31 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst history_completed_todo_list_1 = __webpack_require__(29);\r\nconst history_todo_list_1 = __webpack_require__(32);\r\nclass HistoryTodoListPanel extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"h3\", { className: \"sr-only\" }, \"To-dos\"),\r\n            React.createElement(history_todo_list_1.HistoryTodoList, { todos: this.props.todos }),\r\n            this.props.completedTodos.length\r\n                ? React.createElement(\"div\", null,\r\n                    React.createElement(\"h3\", { className: \"sr-only\" }, \"Completed To-dos\"),\r\n                    React.createElement(history_completed_todo_list_1.HistoryCompletedTodoList, { todos: this.props.completedTodos }))\r\n                : null));\r\n    }\r\n}\r\nexports.HistoryTodoListPanel = HistoryTodoListPanel;\r\n\n\n/***/ }),\n/* 32 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst history_todo_list_item_1 = __webpack_require__(30);\r\nclass HistoryTodoList extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group\" }, this.props.todos.map(todo => React.createElement(history_todo_list_item_1.HistoryTodoListItem, { key: todo.id, todo: todo }))));\r\n    }\r\n}\r\nexports.HistoryTodoList = HistoryTodoList;\r\n\n\n/***/ }),\n/* 33 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst todo_actions_panel_btn_group_1 = __webpack_require__(7);\r\nconst todo_delete_btn_1 = __webpack_require__(8);\r\nconst todo_move_down_btn_1 = __webpack_require__(38);\r\nconst todo_move_up_btn_1 = __webpack_require__(39);\r\nconst todo_rename_btn_1 = __webpack_require__(10);\r\nconst todo_title_1 = __webpack_require__(5);\r\nclass TodoActionsPanel extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group-item\" },\r\n            React.createElement(\"div\", { className: \"todo-list-todo-panel\" },\r\n                React.createElement(todo_title_1.TodoTitle, { title: this.props.todo.name }),\r\n                React.createElement(todo_actions_panel_btn_group_1.TodoActionsPanelBtnGroup, { showDefaultPanel: this.props.showDefaultPanel },\r\n                    React.createElement(todo_delete_btn_1.TodoDeleteBtn, { deleteTodo: this.props.deleteTodo }),\r\n                    React.createElement(todo_move_up_btn_1.TodoMoveUpBtn, { moveTodoUp: this.props.moveTodoUp }),\r\n                    React.createElement(todo_move_down_btn_1.TodoMoveDownBtn, { moveTodoDown: this.props.moveTodoDown }),\r\n                    React.createElement(todo_rename_btn_1.TodoRenameBtn, { showRenamePanel: this.props.showRenamePanel })))));\r\n    }\r\n}\r\nexports.TodoActionsPanel = TodoActionsPanel;\r\n\n\n/***/ }),\n/* 34 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass TodoAddForm extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.reset = () => {\r\n            this.setState({ value: \"\" });\r\n        };\r\n        this.onChange = e => {\r\n            this.setState({ value: e.target.value });\r\n        };\r\n        this.onSubmit = e => {\r\n            e.preventDefault();\r\n            this.props.addTodo(this.state.value);\r\n            this.reset();\r\n        };\r\n        this.state = {\r\n            value: \"\",\r\n        };\r\n    }\r\n    render() {\r\n        let inputId = \"todoAddInput\";\r\n        return (React.createElement(\"form\", { role: \"form\", onSubmit: this.onSubmit },\r\n            React.createElement(\"label\", { htmlFor: inputId, className: \"sr-only\" }, \"New To-do Name\"),\r\n            React.createElement(\"div\", { className: \"input-group\" },\r\n                React.createElement(\"input\", { id: inputId, name: \"name\", type: \"text\", className: \"form-control\", placeholder: \"What do you need to do?\", onChange: this.onChange, value: this.state.value, required: true }),\r\n                React.createElement(\"span\", { className: \"input-group-btn\" },\r\n                    React.createElement(\"button\", { type: \"submit\", className: \"btn btn-success\", \"aria-label\": \"Add To-do\" },\r\n                        React.createElement(\"span\", { className: \"glyphicon glyphicon-plus\", \"aria-hidden\": \"true\" }))))));\r\n    }\r\n}\r\nexports.TodoAddForm = TodoAddForm;\r\n\n\n/***/ }),\n/* 35 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst todo_actions_panel_1 = __webpack_require__(33);\r\nconst todo_panel_1 = __webpack_require__(40);\r\nconst todo_rename_panel_1 = __webpack_require__(41);\r\nvar PanelType;\r\n(function (PanelType) {\r\n    PanelType[PanelType[\"DefaultPanel\"] = 0] = \"DefaultPanel\";\r\n    PanelType[PanelType[\"ActionsPanel\"] = 1] = \"ActionsPanel\";\r\n    PanelType[PanelType[\"RenamePanel\"] = 2] = \"RenamePanel\";\r\n})(PanelType || (PanelType = {}));\r\nclass TodoListItem extends React.PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n        this.completeTodo = () => {\r\n            this.props.completeTodo(this.props.todo.id);\r\n        };\r\n        this.deleteTodo = () => {\r\n            this.props.deleteTodo(this.props.todo.id);\r\n        };\r\n        this.moveTodoUp = () => {\r\n            this.props.moveTodoUp(this.props.todo.id);\r\n        };\r\n        this.moveTodoDown = () => {\r\n            this.props.moveTodoDown(this.props.todo.id);\r\n        };\r\n        this.renameTodo = (name) => {\r\n            this.props.renameTodo(this.props.todo.id, name);\r\n        };\r\n        this.showDefaultPanel = () => {\r\n            this.setState({\r\n                panel: PanelType.DefaultPanel\r\n            });\r\n        };\r\n        this.showActionsPanel = () => {\r\n            this.setState({\r\n                panel: PanelType.ActionsPanel\r\n            });\r\n        };\r\n        this.showRenamePanel = () => {\r\n            this.setState({\r\n                panel: PanelType.RenamePanel\r\n            });\r\n        };\r\n        this.state = {\r\n            panel: PanelType.DefaultPanel\r\n        };\r\n    }\r\n    render() {\r\n        let panel;\r\n        switch (this.state.panel) {\r\n            case PanelType.DefaultPanel: {\r\n                panel =\r\n                    React.createElement(todo_panel_1.TodoPanel, { todo: this.props.todo, completeTodo: this.completeTodo, showActionsPanel: this.showActionsPanel });\r\n                break;\r\n            }\r\n            case PanelType.ActionsPanel: {\r\n                panel =\r\n                    React.createElement(todo_actions_panel_1.TodoActionsPanel, { todo: this.props.todo, deleteTodo: this.deleteTodo, moveTodoUp: this.moveTodoUp, moveTodoDown: this.moveTodoDown, showDefaultPanel: this.showDefaultPanel, showRenamePanel: this.showRenamePanel });\r\n                break;\r\n            }\r\n            case PanelType.RenamePanel: {\r\n                panel =\r\n                    React.createElement(todo_rename_panel_1.TodoRenamePanel, { todo: this.props.todo, renameTodo: this.renameTodo, showDefaultPanel: this.showDefaultPanel });\r\n                break;\r\n            }\r\n            default: {\r\n                panel = null;\r\n                break;\r\n            }\r\n        }\r\n        return panel;\r\n    }\r\n}\r\nexports.TodoListItem = TodoListItem;\r\n\n\n/***/ }),\n/* 36 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst completed_todo_list_1 = __webpack_require__(22);\r\nconst todo_add_form_1 = __webpack_require__(34);\r\nconst todo_list_1 = __webpack_require__(37);\r\nclass TodoListPanel extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(todo_add_form_1.TodoAddForm, { addTodo: this.props.addTodo }),\r\n            React.createElement(\"br\", null),\r\n            React.createElement(\"h3\", { className: \"sr-only\" }, \"To-dos\"),\r\n            React.createElement(todo_list_1.TodoList, { todos: this.props.todos, completeTodo: this.props.completeTodo, deleteTodo: this.props.deleteTodo, moveTodoUp: this.props.moveTodoUp, moveTodoDown: this.props.moveTodoDown, renameTodo: this.props.renameTodo }),\r\n            this.props.completedTodos.length\r\n                ? React.createElement(\"div\", null,\r\n                    React.createElement(\"h3\", { className: \"sr-only\" }, \"Completed To-dos\"),\r\n                    React.createElement(completed_todo_list_1.CompletedTodoList, { todos: this.props.completedTodos, uncompleteTodo: this.props.uncompleteTodo, deleteTodo: this.props.deleteTodo, renameTodo: this.props.renameTodo }))\r\n                : null));\r\n    }\r\n}\r\nexports.TodoListPanel = TodoListPanel;\r\n\n\n/***/ }),\n/* 37 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst todo_list_item_1 = __webpack_require__(35);\r\nclass TodoList extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group\" }, this.props.todos.map(todo => React.createElement(todo_list_item_1.TodoListItem, { key: todo.id, todo: todo, completeTodo: this.props.completeTodo, deleteTodo: this.props.deleteTodo, moveTodoUp: this.props.moveTodoUp, moveTodoDown: this.props.moveTodoDown, renameTodo: this.props.renameTodo }))));\r\n    }\r\n}\r\nexports.TodoList = TodoList;\r\n\n\n/***/ }),\n/* 38 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass TodoMoveDownBtn extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"button\", { onClick: this.props.moveTodoDown, type: \"button\", className: \"btn btn-link\", \"aria-label\": \"Move down\" },\r\n            React.createElement(\"span\", { className: \"glyphicon glyphicon-chevron-down\", \"aria-hidden\": \"true\" })));\r\n    }\r\n}\r\nexports.TodoMoveDownBtn = TodoMoveDownBtn;\r\n\n\n/***/ }),\n/* 39 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nclass TodoMoveUpBtn extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"button\", { onClick: this.props.moveTodoUp, type: \"button\", className: \"btn btn-link\", \"aria-label\": \"Move up\" },\r\n            React.createElement(\"span\", { className: \"glyphicon glyphicon-chevron-up\", \"aria-hidden\": \"true\" })));\r\n    }\r\n}\r\nexports.TodoMoveUpBtn = TodoMoveUpBtn;\r\n\n\n/***/ }),\n/* 40 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst react_dom_1 = __webpack_require__(2);\r\nconst todo_panel_btn_group_1 = __webpack_require__(9);\r\nconst todo_title_1 = __webpack_require__(5);\r\nclass TodoPanel extends React.PureComponent {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.btnGroupRef = comp => {\r\n            if (comp) {\r\n                this.btnGroup = react_dom_1.findDOMNode(comp);\r\n            }\r\n        };\r\n        this.onClick = e => {\r\n            if (!this.btnGroup.contains(e.target)) {\r\n                this.props.completeTodo();\r\n            }\r\n        };\r\n    }\r\n    render() {\r\n        return (React.createElement(\"a\", { onClick: this.onClick, className: \"list-group-item\" },\r\n            React.createElement(\"div\", { className: \"todo-list-todo-panel\" },\r\n                React.createElement(todo_title_1.TodoTitle, { title: this.props.todo.name }),\r\n                React.createElement(todo_panel_btn_group_1.TodoPanelBtnGroup, { ref: this.btnGroupRef, showActionsPanel: this.props.showActionsPanel }))));\r\n    }\r\n}\r\nexports.TodoPanel = TodoPanel;\r\n\n\n/***/ }),\n/* 41 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst React = __webpack_require__(0);\r\nconst todo_rename_form_1 = __webpack_require__(11);\r\nclass TodoRenamePanel extends React.PureComponent {\r\n    render() {\r\n        return (React.createElement(\"div\", { className: \"list-group-item\" },\r\n            React.createElement(todo_rename_form_1.TodoRenameForm, Object.assign({}, this.props))));\r\n    }\r\n}\r\nexports.TodoRenamePanel = TodoRenamePanel;\r\n\n\n/***/ }),\n/* 42 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst event_store_1 = __webpack_require__(1);\r\nclass AggregateRoot {\r\n    get uncommittedEvents() {\r\n        return this._uncommittedEvents;\r\n    }\r\n    get id() {\r\n        return this._id;\r\n    }\r\n    init() {\r\n        this._uncommittedEvents = new Array();\r\n    }\r\n    constructor(events) {\r\n        this.init();\r\n        for (const e of events) {\r\n            this[event_store_1.DomainEventType[e.type]](e);\r\n        }\r\n    }\r\n    applyAndStage(e) {\r\n        this[event_store_1.DomainEventType[e.type]](e);\r\n        this._uncommittedEvents.push(e);\r\n    }\r\n}\r\nexports.AggregateRoot = AggregateRoot;\r\n\n\n/***/ }),\n/* 43 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst event_store_1 = __webpack_require__(1);\r\nclass TodoAdded {\r\n    constructor(aggregateId, todoId, todoName) {\r\n        this.aggregateId = aggregateId;\r\n        this.todoId = todoId;\r\n        this.todoName = todoName;\r\n        this.type = event_store_1.DomainEventType.TodoAdded;\r\n    }\r\n}\r\nexports.TodoAdded = TodoAdded;\r\nclass TodoRemoved {\r\n    constructor(aggregateId, todoId) {\r\n        this.aggregateId = aggregateId;\r\n        this.todoId = todoId;\r\n        this.type = event_store_1.DomainEventType.TodoRemoved;\r\n    }\r\n}\r\nexports.TodoRemoved = TodoRemoved;\r\nclass TodoCompleted {\r\n    constructor(aggregateId, todoId, todoCompletionTimestamp) {\r\n        this.aggregateId = aggregateId;\r\n        this.todoId = todoId;\r\n        this.todoCompletionTimestamp = todoCompletionTimestamp;\r\n        this.type = event_store_1.DomainEventType.TodoCompleted;\r\n    }\r\n}\r\nexports.TodoCompleted = TodoCompleted;\r\nclass TodoUncompleted {\r\n    constructor(aggregateId, todoId) {\r\n        this.aggregateId = aggregateId;\r\n        this.todoId = todoId;\r\n        this.type = event_store_1.DomainEventType.TodoUncompleted;\r\n    }\r\n}\r\nexports.TodoUncompleted = TodoUncompleted;\r\nclass TodoRenamed {\r\n    constructor(aggregateId, todoId, todoName) {\r\n        this.aggregateId = aggregateId;\r\n        this.todoId = todoId;\r\n        this.todoName = todoName;\r\n        this.type = event_store_1.DomainEventType.TodoRenamed;\r\n    }\r\n}\r\nexports.TodoRenamed = TodoRenamed;\r\nclass TodoPositionChanged {\r\n    constructor(aggregateId, todoId, todoOffset) {\r\n        this.aggregateId = aggregateId;\r\n        this.todoId = todoId;\r\n        this.todoOffset = todoOffset;\r\n        this.type = event_store_1.DomainEventType.TodoPositionChanged;\r\n    }\r\n}\r\nexports.TodoPositionChanged = TodoPositionChanged;\r\n\n\n/***/ }),\n/* 44 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst uuid_1 = __webpack_require__(12);\r\nconst aggregate_root_1 = __webpack_require__(42);\r\nconst events_1 = __webpack_require__(43);\r\nconst todo_1 = __webpack_require__(45);\r\nclass TodoList extends aggregate_root_1.AggregateRoot {\r\n    get todos() {\r\n        return this._todos.filter(x => !x.isCompleted);\r\n    }\r\n    get completedTodos() {\r\n        return this._todos.filter(x => x.isCompleted)\r\n            .sort((x, y) => y.completionTimestamp - x.completionTimestamp);\r\n    }\r\n    init() {\r\n        super.init();\r\n        this._todos = [];\r\n    }\r\n    // Domain Event Handlers\r\n    TodoAdded(e) {\r\n        if (!this.id) {\r\n            this._id = e.aggregateId;\r\n        }\r\n        this._todos.push(new todo_1.Todo(e.todoId, e.todoName));\r\n    }\r\n    TodoRemoved(e) {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            this._todos.splice(i, 1);\r\n        }\r\n    }\r\n    TodoCompleted(e) {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new todo_1.CompletedTodo(oldTodo.id, oldTodo.name, e.todoCompletionTimestamp);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    TodoUncompleted(e) {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new todo_1.Todo(oldTodo.id, oldTodo.name);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    TodoRenamed(e) {\r\n        let todo = this._todos.find(x => x.id === e.todoId);\r\n        if (todo) {\r\n            todo.name = e.todoName;\r\n        }\r\n    }\r\n    TodoPositionChanged(e) {\r\n        let incompleteTodoPositions = this._todos.reduce((p, c, i) => {\r\n            if (!c.isCompleted) {\r\n                p.push(i);\r\n            }\r\n            return p;\r\n        }, []);\r\n        let from = incompleteTodoPositions.findIndex(x => this._todos[x].id === e.todoId);\r\n        if (from === -1) {\r\n            return;\r\n        }\r\n        let to = from + e.todoOffset;\r\n        if (to < 0) {\r\n            to = 0;\r\n        }\r\n        else if (to > incompleteTodoPositions.length - 1) {\r\n            to = incompleteTodoPositions.length - 1;\r\n        }\r\n        if (from === to) {\r\n            return;\r\n        }\r\n        if (to < from) {\r\n            for (let i = to; i < from; i++) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        }\r\n        else {\r\n            for (let i = to; i > from; i--) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        }\r\n        function arraySwap(arr, x, y) {\r\n            let a = arr[x];\r\n            arr[x] = arr[y];\r\n            arr[y] = a;\r\n        }\r\n    }\r\n    add(id, name) {\r\n        let agId = this.id || uuid_1.v4();\r\n        this.applyAndStage(new events_1.TodoAdded(agId, id, name));\r\n    }\r\n    remove(id) {\r\n        this.applyAndStage(new events_1.TodoRemoved(this.id, id));\r\n    }\r\n    complete(id, completionTimestamp) {\r\n        this.applyAndStage(new events_1.TodoCompleted(this.id, id, completionTimestamp));\r\n    }\r\n    uncomplete(id) {\r\n        this.applyAndStage(new events_1.TodoUncompleted(this.id, id));\r\n    }\r\n    rename(id, name) {\r\n        this.applyAndStage(new events_1.TodoRenamed(this.id, id, name));\r\n    }\r\n    changePosition(id, offset) {\r\n        this.applyAndStage(new events_1.TodoPositionChanged(this.id, id, offset));\r\n    }\r\n}\r\nexports.TodoList = TodoList;\r\n\n\n/***/ }),\n/* 45 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nclass Todo {\r\n    constructor(id, name) {\r\n        this.id = id;\r\n        this.name = name;\r\n        this.isCompleted = false;\r\n    }\r\n}\r\nexports.Todo = Todo;\r\nclass CompletedTodo extends Todo {\r\n    constructor(id, name, completionTimestamp) {\r\n        super(id, name);\r\n        this.completionTimestamp = completionTimestamp;\r\n        this.isCompleted = true;\r\n    }\r\n}\r\nexports.CompletedTodo = CompletedTodo;\r\n\n\n/***/ }),\n/* 46 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(14);\nvar bytesToUuid = __webpack_require__(13);\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n/***/ }),\n/* 47 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar rng = __webpack_require__(14);\nvar bytesToUuid = __webpack_require__(13);\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n/***/ }),\n/* 48 */\n/***/ (function(module, exports) {\n\nvar g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// bundle.b821021eb88a34471a23.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 30ef8fd4a9a305c803dc","module.exports = React;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"React\"\n// module id = 0\n// module chunks = 0","import idb, { Cursor, DB } from \"idb\";\r\n\r\nexport enum DomainEventType {\r\n    TodoAdded,\r\n    TodoRemoved,\r\n    TodoCompleted,\r\n    TodoUncompleted,\r\n    TodoRenamed,\r\n    TodoPositionChanged,\r\n}\r\nexport type AggregateIdType = string;\r\nexport interface UncommittedDomainEvent {\r\n    readonly aggregateId: AggregateIdType;\r\n    readonly type: DomainEventType;\r\n}\r\nexport interface DomainEvent extends UncommittedDomainEvent {\r\n    readonly id: number;\r\n}\r\nexport interface EventStore {\r\n    getAllDomainEvents(version?: number): Promise<DomainEvent[]>;\r\n    getDomainEventsByAggregate(aggregateId: AggregateIdType, version?: number): Promise<DomainEvent[]>;\r\n    postDomainEvents(events: UncommittedDomainEvent[]): Promise<void>;\r\n}\r\n\r\nconst dbName = \"estd-db\";\r\nconst domainEventStoreName = \"domain-event\";\r\nconst aggregateIdPropName = \"aggregateId\";\r\nconst eventIdPropName = \"id\";\r\n\r\nasync function open(): Promise<DB> {\r\n    return await idb.open(dbName, 1, db => {\r\n        switch (db.oldVersion) {\r\n            case 0:\r\n                db.createObjectStore(domainEventStoreName, { autoIncrement: true, keyPath: eventIdPropName })\r\n                    .createIndex(aggregateIdPropName, aggregateIdPropName);\r\n        }\r\n    });\r\n}\r\nexport async function allDomainEvents(version?: number): Promise<DomainEvent[]> {\r\n    let db = await open();\r\n    let events = [] as DomainEvent[];\r\n    let tx = db.transaction(domainEventStoreName);\r\n    let store = tx.objectStore(domainEventStoreName);\r\n    function cursorCallback(cursor: Cursor): void {\r\n        if (!cursor) {\r\n            return;\r\n        }\r\n        events.push(cursor.value as DomainEvent);\r\n        // tslint:disable-next-line:no-floating-promises\r\n        cursor.continue();\r\n    }\r\n    // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n    if (version) {\r\n        store.iterateCursor(IDBKeyRange.upperBound(version), cursorCallback);\r\n    } else {\r\n        store.iterateCursor(cursorCallback);\r\n    }\r\n    await tx.complete;\r\n    return events;\r\n}\r\nexport async function domainEventsByAggregate(aggregateId: AggregateIdType, version?: number): Promise<DomainEvent[]> {\r\n    let db = await open();\r\n    let events = [] as DomainEvent[];\r\n    let tx = db.transaction(domainEventStoreName);\r\n    let index = tx.objectStore(domainEventStoreName).index(aggregateIdPropName);\r\n    function cursorCallback(cursor: Cursor): void {\r\n        if (!cursor) {\r\n            return;\r\n        }\r\n        let event = cursor.value as DomainEvent;\r\n        if (!version || event.id <= version) {\r\n            events.push(event);\r\n        }\r\n        // tslint:disable-next-line:no-floating-promises\r\n        cursor.continue();\r\n    }\r\n    // iterateCursor() should be replaced with usage of openCursor() when \"idb\" decides it is safe to do so.\r\n    index.iterateCursor(aggregateId, cursorCallback);\r\n    await tx.complete;\r\n    return events;\r\n}\r\nexport async function postDomainEvents(events: UncommittedDomainEvent[]): Promise<void> {\r\n    let db = await open();\r\n    let tx = db.transaction(domainEventStoreName, \"readwrite\");\r\n    let store = tx.objectStore(domainEventStoreName);\r\n    let addPromises = [];\r\n    for (const e of events) {\r\n        addPromises.push(store.add(e));\r\n    }\r\n    await Promise.all(addPromises);\r\n    await tx.complete;\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./event-store.ts","module.exports = ReactDOM;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ReactDOM\"\n// module id = 2\n// module chunks = 0","var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nimport { createElement, Component } from 'react';\nimport { findDOMNode } from 'react-dom';\nimport generateOutsideCheck from './generateOutsideCheck';\n\n/**\n * A higher-order-component for handling onClickOutside for React components.\n */\nvar registeredComponents = [];\nvar handlers = [];\n\n/**\n * This function generates the HOC function that you'll use\n * in order to impart onOutsideClick listening to an\n * arbitrary component. It gets called at the end of the\n * bootstrapping code to yield an instance of the\n * onClickOutsideHOC function defined inside setupHOC().\n */\nexport default function onClickOutsideHOC(WrappedComponent, config) {\n  var _class, _temp2;\n\n  return _temp2 = _class = function (_Component) {\n    _inherits(onClickOutside, _Component);\n\n    function onClickOutside() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, onClickOutside);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = onClickOutside.__proto__ || Object.getPrototypeOf(onClickOutside)).call.apply(_ref, [this].concat(args))), _this), _this.__outsideClickHandler = null, _this.enableOnClickOutside = function () {\n        var fn = _this.__outsideClickHandler;\n        if (fn && typeof document !== 'undefined') {\n          var events = _this.props.eventTypes;\n          if (!events.forEach) {\n            events = [events];\n          }\n          events.forEach(function (eventName) {\n            var handlerOptions = !_this.props.preventDefault && ['touchstart', 'touchmove'].indexOf(eventName) !== -1 ? { passive: true } : null;\n            document.addEventListener(eventName, fn, handlerOptions);\n          });\n        }\n      }, _this.disableOnClickOutside = function () {\n        var fn = _this.__outsideClickHandler;\n        if (fn && typeof document !== 'undefined') {\n          var events = _this.props.eventTypes;\n          if (!events.forEach) {\n            events = [events];\n          }\n          events.forEach(function (eventName) {\n            return document.removeEventListener(eventName, fn);\n          });\n        }\n      }, _this.getRef = function (ref) {\n        return _this.instanceRef = ref;\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(onClickOutside, [{\n      key: 'getInstance',\n\n\n      /**\n       * Access the WrappedComponent's instance.\n       */\n      value: function getInstance() {\n        if (!WrappedComponent.prototype.isReactComponent) {\n          return this;\n        }\n        var ref = this.instanceRef;\n        return ref.getInstance ? ref.getInstance() : ref;\n      }\n\n      // this is given meaning in componentDidMount/componentDidUpdate\n\n    }, {\n      key: 'componentDidMount',\n\n\n      /**\n       * Add click listeners to the current document,\n       * linked to this component's state.\n       */\n      value: function componentDidMount() {\n        // If we are in an environment without a DOM such\n        // as shallow rendering or snapshots then we exit\n        // early to prevent any unhandled errors being thrown.\n        if (typeof document === 'undefined' || !document.createElement) {\n          return;\n        }\n\n        var instance = this.getInstance();\n\n        if (config && typeof config.handleClickOutside === 'function') {\n          this.__clickOutsideHandlerProp = config.handleClickOutside(instance);\n          if (typeof this.__clickOutsideHandlerProp !== 'function') {\n            throw new Error('WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.');\n          }\n        } else if (typeof instance.handleClickOutside === 'function') {\n          if (Component.prototype.isPrototypeOf(instance)) {\n            this.__clickOutsideHandlerProp = instance.handleClickOutside.bind(instance);\n          } else {\n            this.__clickOutsideHandlerProp = instance.handleClickOutside;\n          }\n        } else if (typeof instance.props.handleClickOutside === 'function') {\n          this.__clickOutsideHandlerProp = instance.props.handleClickOutside;\n        } else {\n          throw new Error('WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.');\n        }\n\n        // TODO: try to get rid of this, could be done with function ref, might be problematic for SFC though, they do not expose refs\n        if (findDOMNode(instance) === null) {\n          return;\n        }\n\n        this.addOutsideClickHandler();\n      }\n\n      /**\n      * Track for disableOnClickOutside props changes and enable/disable click outside\n      */\n\n    }, {\n      key: 'componentWillReceiveProps',\n      value: function componentWillReceiveProps(nextProps) {\n        if (this.props.disableOnClickOutside && !nextProps.disableOnClickOutside) {\n          this.enableOnClickOutside();\n        } else if (!this.props.disableOnClickOutside && nextProps.disableOnClickOutside) {\n          this.disableOnClickOutside();\n        }\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate() {\n        var componentNode = findDOMNode(this.getInstance());\n\n        if (componentNode === null && this.__outsideClickHandler) {\n          this.removeOutsideClickHandler();\n          return;\n        }\n\n        if (componentNode !== null && !this.__outsideClickHandler) {\n          this.addOutsideClickHandler();\n          return;\n        }\n      }\n\n      /**\n       * Remove all document's event listeners for this component\n       */\n\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        this.removeOutsideClickHandler();\n      }\n\n      /**\n       * Can be called to explicitly enable event listening\n       * for clicks and touches outside of this element.\n       */\n\n\n      /**\n       * Can be called to explicitly disable event listening\n       * for clicks and touches outside of this element.\n       */\n\n    }, {\n      key: 'addOutsideClickHandler',\n      value: function addOutsideClickHandler() {\n        var fn = this.__outsideClickHandler = generateOutsideCheck(findDOMNode(this.getInstance()), this.__clickOutsideHandlerProp, this.props.outsideClickIgnoreClass, this.props.excludeScrollbar, this.props.preventDefault, this.props.stopPropagation);\n\n        var pos = registeredComponents.length;\n        registeredComponents.push(this);\n        handlers[pos] = fn;\n\n        // If there is a truthy disableOnClickOutside property for this\n        // component, don't immediately start listening for outside events.\n        if (!this.props.disableOnClickOutside) {\n          this.enableOnClickOutside();\n        }\n      }\n    }, {\n      key: 'removeOutsideClickHandler',\n      value: function removeOutsideClickHandler() {\n        this.disableOnClickOutside();\n        this.__outsideClickHandler = false;\n\n        var pos = registeredComponents.indexOf(this);\n\n        if (pos > -1) {\n          // clean up so we don't leak memory\n          if (handlers[pos]) {\n            handlers.splice(pos, 1);\n          }\n          registeredComponents.splice(pos, 1);\n        }\n      }\n    }, {\n      key: 'render',\n\n\n      /**\n       * Pass-through render\n       */\n      value: function render() {\n        var _this2 = this;\n\n        var props = Object.keys(this.props).filter(function (prop) {\n          return prop !== 'excludeScrollbar';\n        }).reduce(function (props, prop) {\n          props[prop] = _this2.props[prop];\n          return props;\n        }, {});\n\n        if (WrappedComponent.prototype.isReactComponent) {\n          props.ref = this.getRef;\n        } else {\n          props.wrappedRef = this.getRef;\n        }\n\n        props.disableOnClickOutside = this.disableOnClickOutside;\n        props.enableOnClickOutside = this.enableOnClickOutside;\n\n        return createElement(WrappedComponent, props);\n      }\n    }]);\n\n    return onClickOutside;\n  }(Component), _class.displayName = 'OnClickOutside(' + (WrappedComponent.displayName || WrappedComponent.name || 'Component') + ')', _class.defaultProps = {\n    eventTypes: ['mousedown', 'touchstart'],\n    excludeScrollbar: config && config.excludeScrollbar || false,\n    outsideClickIgnoreClass: 'ignore-react-onclickoutside',\n    preventDefault: false,\n    stopPropagation: false\n  }, _class.getClass = function () {\n    return WrappedComponent.getClass ? WrappedComponent.getClass() : WrappedComponent;\n  }, _temp2;\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-onclickoutside/es/index.js\n// module id = 3\n// module chunks = 0","import * as React from \"react\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface CompletedTodoTitleProps {\r\n  title: string;\r\n  completionDate: Date;\r\n}\r\n\r\nexport class CompletedTodoTitle extends React.PureComponent<CompletedTodoTitleProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-title\">\r\n        {this.props.title}<br />\r\n        <small>Completed on {this.props.completionDate.toLocaleDateString()}</small>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/completed-todo-title.tsx","import * as React from \"react\";\r\n\r\nexport interface TodoTitleProps {\r\n  title: string;\r\n}\r\n\r\nexport class TodoTitle extends React.PureComponent<TodoTitleProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-title\">{this.props.title}</div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-title.tsx","import { AggregateIdType, allDomainEvents, DomainEvent, domainEventsByAggregate, DomainEventType } from \"./event-store\";\r\n\r\nexport async function todoListEvents(): Promise<DomainEvent[]> {\r\n    // This app's domain and event-store are designed to accommodate multiple aggregates of different types.\r\n    // Currently, the app only has one aggregate type (TodoList) and only allows the user to have one instance of that aggregate.\r\n    // This todoLists() lookup occurs to get the aggregateId of the user's one TodoList.\r\n    let events = await allDomainEvents();\r\n    let lists = todoLists(events);\r\n    return (lists.length)\r\n        ? await domainEventsByAggregate(lists[0])\r\n        : [];\r\n}\r\n\r\nexport async function todoListId(): Promise<AggregateIdType | null> {\r\n    // This app's domain and event-store are designed to accommodate multiple aggregates of different types.\r\n    // Currently, the app only has one aggregate type (TodoList) and only allows the user to have one instance of that aggregate.\r\n    // This todoLists() lookup occurs to get the aggregateId of the user's one TodoList.\r\n    let events = await allDomainEvents();\r\n    let lists = todoLists(events);\r\n    return (lists.length)\r\n        ? lists[0]\r\n        : null;\r\n}\r\n\r\nfunction todoLists(events: DomainEvent[]): AggregateIdType[] {\r\n    return events.reduce<AggregateIdType[]>((p, c) => {\r\n        if (c.type === DomainEventType.TodoAdded && p.indexOf(c.aggregateId) === -1) {\r\n            p.push(c.aggregateId);\r\n        }\r\n        return p;\r\n    }, []);\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./read.ts","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\n\r\nexport interface TodoActionsPanelBtnGroupProps {\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nclass TodoActionsPanelBtnGroupInner extends React.PureComponent<TodoActionsPanelBtnGroupProps & InjectedOnClickOutProps> {\r\n  handleClickOutside = () => {\r\n    this.props.showDefaultPanel();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-btn-group\">\r\n        <div className=\"btn-group\" role=\"group\">\r\n          {this.props.children}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const TodoActionsPanelBtnGroup = OnClickOut<TodoActionsPanelBtnGroupProps>(TodoActionsPanelBtnGroupInner);\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-actions-panel-btn-group.tsx","import * as React from \"react\";\r\n\r\nexport interface TodoDeleteBtnProps {\r\n  deleteTodo(): void;\r\n}\r\n\r\nexport class TodoDeleteBtn extends React.PureComponent<TodoDeleteBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.deleteTodo} type=\"button\" className=\"btn btn-link\" aria-label=\"Delete\">\r\n        <span className=\"glyphicon glyphicon-trash\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-delete-btn.tsx","import * as React from \"react\";\r\n\r\nexport interface TodoPanelBtnGroupProps {\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class TodoPanelBtnGroup extends React.PureComponent<TodoPanelBtnGroupProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"todo-list-todo-btn-group\">\r\n        <button onClick={this.props.showActionsPanel} type=\"button\" className=\"btn btn-link\" aria-label=\"Actions\">\r\n          <span className=\"glyphicon glyphicon-cog\" aria-hidden=\"true\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-panel-btn-group.tsx","import * as React from \"react\";\r\n\r\nexport interface TodoRenameBtnProps {\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class TodoRenameBtn extends React.PureComponent<TodoRenameBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.showRenamePanel} type=\"button\" className=\"btn btn-link\"  aria-label=\"Rename\">\r\n        <span className=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-rename-btn.tsx","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\nimport { Todo } from \"../domain/todo\";\r\n\r\nexport interface TodoRenameFormProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\ninterface TodoRenameFormState {\r\n  value: string;\r\n}\r\n\r\nclass TodoRenameFormInner extends React.PureComponent<TodoRenameFormProps & InjectedOnClickOutProps, TodoRenameFormState> {\r\n  constructor(props: TodoRenameFormProps & InjectedOnClickOutProps) {\r\n    super(props);\r\n    this.state = {\r\n      value: this.props.todo.name,\r\n    };\r\n  }\r\n  handleClickOutside = () => {\r\n    this.props.showDefaultPanel();\r\n  }\r\n  onChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.setState({ value: e.target.value });\r\n  }\r\n  onSubmit: React.FormEventHandler<HTMLFormElement> = e => {\r\n    e.preventDefault();\r\n    this.props.renameTodo(this.state.value);\r\n    this.props.showDefaultPanel();\r\n  }\r\n  render() {\r\n    let inputId = \"todoRenameInput-\" + this.props.todo.id;\r\n    return (\r\n      <form role=\"form\" onSubmit={this.onSubmit}>\r\n        <label htmlFor={inputId} className=\"sr-only\">New Name</label>\r\n        <div className=\"input-group\">\r\n          <input id={inputId} name=\"name\" type=\"text\" className=\"form-control\" onChange={this.onChange} value={this.state.value} required />\r\n          <span className=\"input-group-btn\">\r\n            <button type=\"submit\" className=\"btn btn-success\" aria-label=\"Rename To-do\">\r\n              <span className=\"glyphicon glyphicon-pencil\" aria-hidden=\"true\" />\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport const TodoRenameForm = OnClickOut<TodoRenameFormProps>(TodoRenameFormInner);\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-rename-form.tsx","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/index.js\n// module id = 12\n// module chunks = 0","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/lib/bytesToUuid.js\n// module id = 13\n// module chunks = 0","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/lib/rng-browser.js\n// module id = 14\n// module chunks = 0","import * as React from \"react\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { TodoIdType } from \"../domain/todo\";\r\nimport { TodoList } from \"../domain/todo-list\";\r\nimport { AggregateIdType, DomainEvent, domainEventsByAggregate, postDomainEvents } from \"../event-store\";\r\nimport { todoListEvents } from \"../read\";\r\nimport { EventList } from \"./event-list\";\r\nimport { EventListEmpty } from \"./event-list-empty\";\r\nimport { HistoryTodoListPanel } from \"./history-todo-list-panel\";\r\nimport { TodoListPanel } from \"./todo-list-panel\";\r\n\r\nexport interface BodyProps {\r\n  todoListId: AggregateIdType | null;\r\n}\r\n\r\ninterface BodyState {\r\n  todoListId: AggregateIdType | null;\r\n  events: DomainEvent[];\r\n  history: boolean;\r\n  historyVersion: number;\r\n}\r\n\r\nexport class Body extends React.PureComponent<BodyProps, BodyState> {\r\n  constructor(props: BodyProps) {\r\n    super(props);\r\n    this.state = {\r\n      todoListId: props.todoListId,\r\n      events: [],\r\n      history: false,\r\n      historyVersion: 0,\r\n    };\r\n  }\r\n\r\n  componentDidMount(): void {\r\n    if (this.state.todoListId) {\r\n      domainEventsByAggregate(this.state.todoListId)\r\n        .then(events => { this.setState({ events }); })\r\n        .catch(console.log);\r\n    }\r\n  }\r\n  updateDomainTodoList = async (command: (todoList: TodoList) => void): Promise<void> => {\r\n    let events = (this.state.todoListId)\r\n      ? await domainEventsByAggregate(this.state.todoListId)\r\n      : await todoListEvents();\r\n    let todoList = new TodoList(events);\r\n    command(todoList);\r\n    await postDomainEvents(todoList.uncommittedEvents);\r\n    this.setState({\r\n      todoListId: todoList.id,\r\n      events: await domainEventsByAggregate(todoList.id),\r\n    });\r\n  }\r\n  addTodo = (name: string) => {\r\n    this.updateDomainTodoList(list => { list.add(uuid(), name); })\r\n      .catch(console.log);\r\n  }\r\n  completeTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.complete(id, Date.now()); })\r\n      .catch(console.log);\r\n  }\r\n  uncompleteTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.uncomplete(id); })\r\n      .catch(console.log);\r\n  }\r\n  deleteTodo = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.remove(id); })\r\n      .catch(console.log);\r\n  }\r\n  moveTodoUp = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.changePosition(id, -1); })\r\n      .catch(console.log);\r\n  }\r\n  moveTodoDown = (id: TodoIdType) => {\r\n    this.updateDomainTodoList(list => { list.changePosition(id, 1); })\r\n      .catch(console.log);\r\n  }\r\n  renametodo = (id: TodoIdType, name: string) => {\r\n    this.updateDomainTodoList(list => { list.rename(id, name); })\r\n      .catch(console.log);\r\n  }\r\n  showHistoryVersion = (version: number) => {\r\n    this.setState({ history: true, historyVersion: version });\r\n  }\r\n  showCurrentVersion = () => {\r\n    domainEventsByAggregate(this.state.todoListId as string)\r\n      .then(events => { this.setState({ events, history: false, historyVersion: 0 }); })\r\n      .catch(console.log);\r\n  }\r\n  render() {\r\n    let todoList = new TodoList(\r\n      this.state.history\r\n        ? this.state.events.slice(0, this.state.historyVersion)\r\n        : this.state.events\r\n    );\r\n\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"row\">\r\n          <div className=\"col-sm-8\">\r\n            {this.state.history\r\n              ? <HistoryTodoListPanel\r\n                todos={todoList.todos}\r\n                completedTodos={todoList.completedTodos}\r\n              />\r\n              : <TodoListPanel\r\n                todos={todoList.todos}\r\n                completedTodos={todoList.completedTodos}\r\n                addTodo={this.addTodo}\r\n                completeTodo={this.completeTodo}\r\n                uncompleteTodo={this.uncompleteTodo}\r\n                deleteTodo={this.deleteTodo}\r\n                moveTodoUp={this.moveTodoUp}\r\n                moveTodoDown={this.moveTodoDown}\r\n                renameTodo={this.renametodo}\r\n              />\r\n            }\r\n          </div>\r\n          <div className=\"col-sm-4\">\r\n            <h3>Domain Events</h3>\r\n            {this.state.events.length\r\n              ? <EventList\r\n                disableOnClickOutside={!this.state.history}\r\n                events={this.state.events}\r\n                showHistoryVersion={this.showHistoryVersion}\r\n                showCurrentVersion={this.showCurrentVersion} />\r\n              : <EventListEmpty />}\r\n          </div>\r\n        </div>\r\n        <footer>\r\n          <p>&copy; 2017 - Jon Brian Skog</p>\r\n        </footer>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/body.tsx","'use strict';\n\n(function() {\n  function toArray(arr) {\n    return Array.prototype.slice.call(arr);\n  }\n\n  function promisifyRequest(request) {\n    return new Promise(function(resolve, reject) {\n      request.onsuccess = function() {\n        resolve(request.result);\n      };\n\n      request.onerror = function() {\n        reject(request.error);\n      };\n    });\n  }\n\n  function promisifyRequestCall(obj, method, args) {\n    var request;\n    var p = new Promise(function(resolve, reject) {\n      request = obj[method].apply(obj, args);\n      promisifyRequest(request).then(resolve, reject);\n    });\n\n    p.request = request;\n    return p;\n  }\n\n  function promisifyCursorRequestCall(obj, method, args) {\n    var p = promisifyRequestCall(obj, method, args);\n    return p.then(function(value) {\n      if (!value) return;\n      return new Cursor(value, p.request);\n    });\n  }\n\n  function proxyProperties(ProxyClass, targetProp, properties) {\n    properties.forEach(function(prop) {\n      Object.defineProperty(ProxyClass.prototype, prop, {\n        get: function() {\n          return this[targetProp][prop];\n        },\n        set: function(val) {\n          this[targetProp][prop] = val;\n        }\n      });\n    });\n  }\n\n  function proxyRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function proxyMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return this[targetProp][prop].apply(this[targetProp], arguments);\n      };\n    });\n  }\n\n  function proxyCursorRequestMethods(ProxyClass, targetProp, Constructor, properties) {\n    properties.forEach(function(prop) {\n      if (!(prop in Constructor.prototype)) return;\n      ProxyClass.prototype[prop] = function() {\n        return promisifyCursorRequestCall(this[targetProp], prop, arguments);\n      };\n    });\n  }\n\n  function Index(index) {\n    this._index = index;\n  }\n\n  proxyProperties(Index, '_index', [\n    'name',\n    'keyPath',\n    'multiEntry',\n    'unique'\n  ]);\n\n  proxyRequestMethods(Index, '_index', IDBIndex, [\n    'get',\n    'getKey',\n    'getAll',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(Index, '_index', IDBIndex, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  function Cursor(cursor, request) {\n    this._cursor = cursor;\n    this._request = request;\n  }\n\n  proxyProperties(Cursor, '_cursor', [\n    'direction',\n    'key',\n    'primaryKey',\n    'value'\n  ]);\n\n  proxyRequestMethods(Cursor, '_cursor', IDBCursor, [\n    'update',\n    'delete'\n  ]);\n\n  // proxy 'next' methods\n  ['advance', 'continue', 'continuePrimaryKey'].forEach(function(methodName) {\n    if (!(methodName in IDBCursor.prototype)) return;\n    Cursor.prototype[methodName] = function() {\n      var cursor = this;\n      var args = arguments;\n      return Promise.resolve().then(function() {\n        cursor._cursor[methodName].apply(cursor._cursor, args);\n        return promisifyRequest(cursor._request).then(function(value) {\n          if (!value) return;\n          return new Cursor(value, cursor._request);\n        });\n      });\n    };\n  });\n\n  function ObjectStore(store) {\n    this._store = store;\n  }\n\n  ObjectStore.prototype.createIndex = function() {\n    return new Index(this._store.createIndex.apply(this._store, arguments));\n  };\n\n  ObjectStore.prototype.index = function() {\n    return new Index(this._store.index.apply(this._store, arguments));\n  };\n\n  proxyProperties(ObjectStore, '_store', [\n    'name',\n    'keyPath',\n    'indexNames',\n    'autoIncrement'\n  ]);\n\n  proxyRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'put',\n    'add',\n    'delete',\n    'clear',\n    'get',\n    'getAll',\n    'getKey',\n    'getAllKeys',\n    'count'\n  ]);\n\n  proxyCursorRequestMethods(ObjectStore, '_store', IDBObjectStore, [\n    'openCursor',\n    'openKeyCursor'\n  ]);\n\n  proxyMethods(ObjectStore, '_store', IDBObjectStore, [\n    'deleteIndex'\n  ]);\n\n  function Transaction(idbTransaction) {\n    this._tx = idbTransaction;\n    this.complete = new Promise(function(resolve, reject) {\n      idbTransaction.oncomplete = function() {\n        resolve();\n      };\n      idbTransaction.onerror = function() {\n        reject(idbTransaction.error);\n      };\n      idbTransaction.onabort = function() {\n        reject(idbTransaction.error);\n      };\n    });\n  }\n\n  Transaction.prototype.objectStore = function() {\n    return new ObjectStore(this._tx.objectStore.apply(this._tx, arguments));\n  };\n\n  proxyProperties(Transaction, '_tx', [\n    'objectStoreNames',\n    'mode'\n  ]);\n\n  proxyMethods(Transaction, '_tx', IDBTransaction, [\n    'abort'\n  ]);\n\n  function UpgradeDB(db, oldVersion, transaction) {\n    this._db = db;\n    this.oldVersion = oldVersion;\n    this.transaction = new Transaction(transaction);\n  }\n\n  UpgradeDB.prototype.createObjectStore = function() {\n    return new ObjectStore(this._db.createObjectStore.apply(this._db, arguments));\n  };\n\n  proxyProperties(UpgradeDB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(UpgradeDB, '_db', IDBDatabase, [\n    'deleteObjectStore',\n    'close'\n  ]);\n\n  function DB(db) {\n    this._db = db;\n  }\n\n  DB.prototype.transaction = function() {\n    return new Transaction(this._db.transaction.apply(this._db, arguments));\n  };\n\n  proxyProperties(DB, '_db', [\n    'name',\n    'version',\n    'objectStoreNames'\n  ]);\n\n  proxyMethods(DB, '_db', IDBDatabase, [\n    'close'\n  ]);\n\n  // Add cursor iterators\n  // TODO: remove this once browsers do the right thing with promises\n  ['openCursor', 'openKeyCursor'].forEach(function(funcName) {\n    [ObjectStore, Index].forEach(function(Constructor) {\n      Constructor.prototype[funcName.replace('open', 'iterate')] = function() {\n        var args = toArray(arguments);\n        var callback = args[args.length - 1];\n        var nativeObject = this._store || this._index;\n        var request = nativeObject[funcName].apply(nativeObject, args.slice(0, -1));\n        request.onsuccess = function() {\n          callback(request.result);\n        };\n      };\n    });\n  });\n\n  // polyfill getAll\n  [Index, ObjectStore].forEach(function(Constructor) {\n    if (Constructor.prototype.getAll) return;\n    Constructor.prototype.getAll = function(query, count) {\n      var instance = this;\n      var items = [];\n\n      return new Promise(function(resolve) {\n        instance.iterateCursor(query, function(cursor) {\n          if (!cursor) {\n            resolve(items);\n            return;\n          }\n          items.push(cursor.value);\n\n          if (count !== undefined && items.length == count) {\n            resolve(items);\n            return;\n          }\n          cursor.continue();\n        });\n      });\n    };\n  });\n\n  var exp = {\n    open: function(name, version, upgradeCallback) {\n      var p = promisifyRequestCall(indexedDB, 'open', [name, version]);\n      var request = p.request;\n\n      request.onupgradeneeded = function(event) {\n        if (upgradeCallback) {\n          upgradeCallback(new UpgradeDB(request.result, event.oldVersion, request.transaction));\n        }\n      };\n\n      return p.then(function(db) {\n        return new DB(db);\n      });\n    },\n    delete: function(name) {\n      return promisifyRequestCall(indexedDB, 'deleteDatabase', [name]);\n    }\n  };\n\n  if (typeof module !== 'undefined') {\n    module.exports = exp;\n    module.exports.default = module.exports;\n  }\n  else {\n    self.idb = exp;\n  }\n}());\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/idb/lib/idb.js\n// module id = 17\n// module chunks = 0","/**\n * Check whether some DOM node is our Component's node.\n */\nfunction isNodeFound(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  }\n  // SVG <use/> elements do not technically reside in the rendered DOM, so\n  // they do not have classList directly, but they offer a link to their\n  // corresponding element, which can have classList. This extra check is for\n  // that case.\n  // See: http://www.w3.org/TR/SVG11/struct.html#InterfaceSVGUseElement\n  // Discussion: https://github.com/Pomax/react-onclickoutside/pull/17\n  if (current.correspondingElement) {\n    return current.correspondingElement.classList.contains(ignoreClass);\n  }\n  return current.classList.contains(ignoreClass);\n}\n\n/**\n * Try to find our node in a hierarchy of nodes, returning the document\n * node as highest node if our node is not found in the path up.\n */\nfunction findHighest(current, componentNode, ignoreClass) {\n  if (current === componentNode) {\n    return true;\n  }\n\n  // If source=local then this event came from 'somewhere'\n  // inside and should be ignored. We could handle this with\n  // a layered approach, too, but that requires going back to\n  // thinking in terms of Dom node nesting, running counter\n  // to React's 'you shouldn't care about the DOM' philosophy.\n  while (current.parentNode) {\n    if (isNodeFound(current, componentNode, ignoreClass)) {\n      return true;\n    }\n    current = current.parentNode;\n  }\n  return current;\n}\n\n/**\n * Check if the browser scrollbar was clicked\n */\nfunction clickedScrollbar(evt) {\n  return document.documentElement.clientWidth <= evt.clientX || document.documentElement.clientHeight <= evt.clientY;\n}\n\n/**\n * Generate the event handler that checks whether a clicked DOM node\n * is inside of, or lives outside of, our Component's node tree.\n */\nexport default function generateOutsideCheck(componentNode, eventHandler, ignoreClass, excludeScrollbar, preventDefault, stopPropagation) {\n  return function (evt) {\n    if (preventDefault) {\n      evt.preventDefault();\n    }\n    if (stopPropagation) {\n      evt.stopPropagation();\n    }\n    var current = evt.target;\n    if (excludeScrollbar && clickedScrollbar(evt) || findHighest(current, componentNode, ignoreClass) !== document) {\n      return;\n    }\n    eventHandler(evt);\n  };\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/react-onclickoutside/es/generateOutsideCheck.js\n// module id = 18\n// module chunks = 0","import * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport { Body } from \"./components/body\";\r\nimport { todoListId } from \"./read\";\r\nimport \"./site.css\";\r\n\r\nif (!window.indexedDB) {\r\n  window.alert(\"Your browser doesn't support IndexedDB (the browser feature this app uses to store your To-dos). Update your browser to its latest version.\");\r\n}\r\n\r\ntodoListId()\r\n  .then(id => {\r\n    ReactDOM.render(\r\n      <Body todoListId={id} />,\r\n      document.getElementById(\"app\"),\r\n    );\r\n  }).catch(console.log);\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./app.tsx","import * as React from \"react\";\r\nimport { CompletedTodo } from \"../domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-title\";\r\nimport { TodoActionsPanelBtnGroup } from \"./todo-actions-panel-btn-group\";\r\nimport { TodoDeleteBtn } from \"./todo-delete-btn\";\r\nimport { TodoRenameBtn } from \"./todo-rename-btn\";\r\n\r\nexport interface CompletedTodoActionsPanelProps {\r\n  todo: CompletedTodo;\r\n  deleteTodo(): void;\r\n  showDefaultPanel(): void;\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class CompletedTodoActionsPanel extends React.PureComponent<CompletedTodoActionsPanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n          <TodoActionsPanelBtnGroup showDefaultPanel={this.props.showDefaultPanel}>\r\n            <TodoDeleteBtn deleteTodo={this.props.deleteTodo} />\r\n            <TodoRenameBtn showRenamePanel={this.props.showRenamePanel} />\r\n          </ TodoActionsPanelBtnGroup>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/completed-todo-actions-panel.tsx","import * as React from \"react\";\r\nimport { CompletedTodo, TodoIdType } from \"../domain/todo\";\r\nimport { CompletedTodoActionsPanel } from \"./completed-todo-actions-panel\";\r\nimport { CompletedTodoPanel } from \"./completed-todo-panel\";\r\nimport { CompletedTodoRenamePanel } from \"./completed-todo-rename-panel\";\r\n\r\nexport interface CompletedTodoListItemProps {\r\n  todo: CompletedTodo;\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nenum PanelType {\r\n  DefaultPanel,\r\n  ActionsPanel,\r\n  RenamePanel,\r\n}\r\n\r\ninterface CompletedTodoListItemState {\r\n  panel: PanelType;\r\n}\r\n\r\nexport class CompletedTodoListItem extends React.PureComponent<CompletedTodoListItemProps, CompletedTodoListItemState> {\r\n  constructor(props: CompletedTodoListItemProps) {\r\n    super(props);\r\n    this.state = {\r\n      panel: PanelType.DefaultPanel\r\n    };\r\n  }\r\n  uncompleteTodo = () => {\r\n    this.props.uncompleteTodo(this.props.todo.id);\r\n  }\r\n  deleteTodo = () => {\r\n    this.props.deleteTodo(this.props.todo.id);\r\n  }\r\n  renameTodo = (name: string) => {\r\n    this.props.renameTodo(this.props.todo.id, name);\r\n  }\r\n  showDefaultPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.DefaultPanel\r\n    });\r\n  }\r\n  showActionsPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.ActionsPanel\r\n    });\r\n  }\r\n  showRenamePanel = () => {\r\n    this.setState({\r\n      panel: PanelType.RenamePanel\r\n    });\r\n  }\r\n  render() {\r\n    let panel: JSX.Element | null;\r\n    switch (this.state.panel) {\r\n      case PanelType.DefaultPanel: {\r\n        panel =\r\n          <CompletedTodoPanel\r\n            todo={this.props.todo}\r\n            uncompleteTodo={this.uncompleteTodo}\r\n            showActionsPanel={this.showActionsPanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.ActionsPanel: {\r\n        panel =\r\n          <CompletedTodoActionsPanel\r\n            todo={this.props.todo}\r\n            deleteTodo={this.deleteTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n            showRenamePanel={this.showRenamePanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.RenamePanel: {\r\n        panel =\r\n          <CompletedTodoRenamePanel\r\n            todo={this.props.todo}\r\n            renameTodo={this.renameTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n          />;\r\n        break;\r\n      }\r\n      default: {\r\n        panel = null;\r\n        break;\r\n      }\r\n    }\r\n    return panel;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/completed-todo-list-item.tsx","import * as React from \"react\";\r\nimport { CompletedTodo, TodoIdType } from \"../domain/todo\";\r\nimport { CompletedTodoListItem } from \"./completed-todo-list-item\";\r\n\r\nexport interface CompletedTodoListProps {\r\n  todos: CompletedTodo[];\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class CompletedTodoList extends React.PureComponent<CompletedTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <CompletedTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n            uncompleteTodo={this.props.uncompleteTodo}\r\n            deleteTodo={this.props.deleteTodo}\r\n            renameTodo={this.props.renameTodo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/completed-todo-list.tsx","import * as React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { CompletedTodo } from \"../domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-title\";\r\nimport { TodoPanelBtnGroup } from \"./todo-panel-btn-group\";\r\n\r\nexport interface CompletedTodoPanelProps {\r\n  todo: CompletedTodo;\r\n  uncompleteTodo(): void;\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class CompletedTodoPanel extends React.PureComponent<CompletedTodoPanelProps> {\r\n  btnGroup: HTMLElement;\r\n  btnGroupRef: React.Ref<TodoPanelBtnGroup> = comp => {\r\n    if (comp) {\r\n      this.btnGroup = findDOMNode(comp);\r\n    }\r\n  }\r\n  onClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\r\n    if (!this.btnGroup.contains(e.target as HTMLElement)) {\r\n      this.props.uncompleteTodo();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <a onClick={this.onClick} className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n          <TodoPanelBtnGroup\r\n            ref={this.btnGroupRef}\r\n            showActionsPanel={this.props.showActionsPanel} />\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/completed-todo-panel.tsx","import * as React from \"react\";\r\nimport { Todo } from \"../domain/todo\";\r\nimport { TodoRenameForm } from \"./todo-rename-form\";\r\n\r\nexport interface CompletedTodoRenamePanelProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nexport class CompletedTodoRenamePanel extends React.PureComponent<CompletedTodoRenamePanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <TodoRenameForm {...this.props} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/completed-todo-rename-panel.tsx","import * as React from \"react\";\r\n\r\nexport const EventListEmpty: React.SFC = () =>\r\n  <p><span className=\"glyphicon glyphicon-exclamation-sign\" aria-hidden=\"true\"></span> Add some to-dos to see events</p>;\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/event-list-empty.tsx","import * as React from \"react\";\r\nimport { DomainEvent, DomainEventType } from \"../event-store\";\r\n\r\nexport interface EventListItemProps {\r\n  event: DomainEvent;\r\n  showHistoryVersion(version: number): void;\r\n}\r\n\r\nexport class EventListItem extends React.PureComponent<EventListItemProps> {\r\n  showHistory: React.MouseEventHandler<HTMLButtonElement> = e => {\r\n    this.props.showHistoryVersion(this.props.event.id);\r\n  }\r\n  render() {\r\n    return (\r\n      <button onClick={this.showHistory} className=\"list-group-item event-list-item\">{this.props.event.id} : {DomainEventType[this.props.event.type]}</button>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/event-list-item.tsx","import * as React from \"react\";\r\nimport OnClickOut, { InjectedOnClickOutProps } from \"react-onclickoutside\";\r\nimport { DomainEvent } from \"../event-store\";\r\nimport { EventListItem } from \"./event-list-item\";\r\n\r\nexport interface EventListProps {\r\n  events: DomainEvent[];\r\n  showHistoryVersion(version: number): void;\r\n  showCurrentVersion(): void;\r\n}\r\n\r\nexport class EventListInner extends React.PureComponent<EventListProps & InjectedOnClickOutProps> {\r\n  handleClickOutside = () => {\r\n    this.props.showCurrentVersion();\r\n  }\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.events.map(event =>\r\n          <EventListItem\r\n            key={event.id}\r\n            event={event}\r\n            showHistoryVersion={this.props.showHistoryVersion}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport const EventList = OnClickOut<EventListProps>(EventListInner);\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/event-list.tsx","import * as React from \"react\";\r\nimport { CompletedTodo } from \"../domain/todo\";\r\nimport { CompletedTodoTitle } from \"./completed-todo-title\";\r\n\r\nexport interface HistoryCompletedTodoListItemProps {\r\n  todo: CompletedTodo;\r\n}\r\n\r\nexport class HistoryCompletedTodoListItem extends React.PureComponent<HistoryCompletedTodoListItemProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item list-group-item-success\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <CompletedTodoTitle title={this.props.todo.name} completionDate={new Date(this.props.todo.completionTimestamp)} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/history-completed-todo-list-item.tsx","import * as React from \"react\";\r\nimport { CompletedTodo } from \"../domain/todo\";\r\nimport { HistoryCompletedTodoListItem } from \"./history-completed-todo-list-item\";\r\n\r\nexport interface HistoryCompletedTodoListProps {\r\n  todos: CompletedTodo[];\r\n}\r\n\r\nexport class HistoryCompletedTodoList extends React.PureComponent<HistoryCompletedTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <HistoryCompletedTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/history-completed-todo-list.tsx","import * as React from \"react\";\r\nimport { Todo } from \"../domain/todo\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface HistoryTodoListItemProps {\r\n  todo: Todo;\r\n}\r\n\r\nexport class HistoryTodoListItem extends React.PureComponent<HistoryTodoListItemProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/history-todo-list-item.tsx","import * as React from \"react\";\r\nimport { CompletedTodo, Todo } from \"../domain/todo\";\r\nimport { HistoryCompletedTodoList } from \"./history-completed-todo-list\";\r\nimport { HistoryTodoList } from \"./history-todo-list\";\r\n\r\nexport interface HistoryTodoListPanelProps {\r\n  todos: Todo[];\r\n  completedTodos: CompletedTodo[];\r\n}\r\n\r\nexport class HistoryTodoListPanel extends React.PureComponent<HistoryTodoListPanelProps> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h3 className=\"sr-only\">To-dos</h3>\r\n        <HistoryTodoList todos={this.props.todos} />\r\n        {this.props.completedTodos.length\r\n          ? <div>\r\n            <h3 className=\"sr-only\">Completed To-dos</h3>\r\n            <HistoryCompletedTodoList todos={this.props.completedTodos}\r\n            />\r\n          </div>\r\n          : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/history-todo-list-panel.tsx","import * as React from \"react\";\r\nimport { Todo } from \"../domain/todo\";\r\nimport { HistoryTodoListItem } from \"./history-todo-list-item\";\r\n\r\nexport interface HistoryTodoListProps {\r\n  todos: Todo[];\r\n}\r\n\r\nexport class HistoryTodoList extends React.PureComponent<HistoryTodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <HistoryTodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/history-todo-list.tsx","import * as React from \"react\";\r\nimport { Todo } from \"../domain/todo\";\r\nimport { TodoActionsPanelBtnGroup } from \"./todo-actions-panel-btn-group\";\r\nimport { TodoDeleteBtn } from \"./todo-delete-btn\";\r\nimport { TodoMoveDownBtn } from \"./todo-move-down-btn\";\r\nimport { TodoMoveUpBtn } from \"./todo-move-up-btn\";\r\nimport { TodoRenameBtn } from \"./todo-rename-btn\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface TodoActionsPanelProps {\r\n  todo: Todo;\r\n  deleteTodo(): void;\r\n  moveTodoUp(): void;\r\n  moveTodoDown(): void;\r\n  showDefaultPanel(): void;\r\n  showRenamePanel(): void;\r\n}\r\n\r\nexport class TodoActionsPanel extends React.PureComponent<TodoActionsPanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n          <TodoActionsPanelBtnGroup showDefaultPanel={this.props.showDefaultPanel}>\r\n            <TodoDeleteBtn deleteTodo={this.props.deleteTodo} />\r\n            <TodoMoveUpBtn moveTodoUp={this.props.moveTodoUp} />\r\n            <TodoMoveDownBtn moveTodoDown={this.props.moveTodoDown} />\r\n            <TodoRenameBtn showRenamePanel={this.props.showRenamePanel} />\r\n          </TodoActionsPanelBtnGroup>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-actions-panel.tsx","import * as React from \"react\";\r\n\r\nexport interface TodoAddFormProps {\r\n  addTodo(name: string): void;\r\n}\r\n\r\ninterface TodoAddFormState {\r\n  value: string;\r\n}\r\n\r\nexport class TodoAddForm extends React.PureComponent<TodoAddFormProps, TodoAddFormState> {\r\n  constructor(props: TodoAddFormProps) {\r\n    super(props);\r\n    this.state = {\r\n      value: \"\",\r\n    };\r\n  }\r\n  reset = () => {\r\n    this.setState({ value: \"\" });\r\n  }\r\n  onChange: React.ChangeEventHandler<HTMLInputElement> = e => {\r\n    this.setState({ value: e.target.value });\r\n  }\r\n  onSubmit: React.FormEventHandler<HTMLFormElement> = e => {\r\n    e.preventDefault();\r\n    this.props.addTodo(this.state.value);\r\n    this.reset();\r\n  }\r\n  render() {\r\n    let inputId = \"todoAddInput\";\r\n    return (\r\n      <form role=\"form\" onSubmit={this.onSubmit}>\r\n        <label htmlFor={inputId} className=\"sr-only\">New To-do Name</label>\r\n        <div className=\"input-group\">\r\n          <input id={inputId} name=\"name\" type=\"text\" className=\"form-control\" placeholder=\"What do you need to do?\" onChange={this.onChange} value={this.state.value} required />\r\n          <span className=\"input-group-btn\">\r\n            <button type=\"submit\" className=\"btn btn-success\" aria-label=\"Add To-do\">\r\n              <span className=\"glyphicon glyphicon-plus\" aria-hidden=\"true\"></span>\r\n            </button>\r\n          </span>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-add-form.tsx","import * as React from \"react\";\r\nimport { Todo, TodoIdType } from \"../domain/todo\";\r\nimport { TodoActionsPanel } from \"./todo-actions-panel\";\r\nimport { TodoPanel } from \"./todo-panel\";\r\nimport { TodoRenamePanel } from \"./todo-rename-panel\";\r\n\r\nexport interface TodoListItemProps {\r\n  todo: Todo;\r\n  completeTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nenum PanelType {\r\n  DefaultPanel,\r\n  ActionsPanel,\r\n  RenamePanel,\r\n}\r\n\r\ninterface TodoListItemState {\r\n  panel: PanelType;\r\n}\r\n\r\nexport class TodoListItem extends React.PureComponent<TodoListItemProps, TodoListItemState> {\r\n  constructor(props: TodoListItemProps) {\r\n    super(props);\r\n    this.state = {\r\n      panel: PanelType.DefaultPanel\r\n    };\r\n  }\r\n  completeTodo = () => {\r\n    this.props.completeTodo(this.props.todo.id);\r\n  }\r\n  deleteTodo = () => {\r\n    this.props.deleteTodo(this.props.todo.id);\r\n  }\r\n  moveTodoUp = () => {\r\n    this.props.moveTodoUp(this.props.todo.id);\r\n  }\r\n  moveTodoDown = () => {\r\n    this.props.moveTodoDown(this.props.todo.id);\r\n  }\r\n  renameTodo = (name: string) => {\r\n    this.props.renameTodo(this.props.todo.id, name);\r\n  }\r\n  showDefaultPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.DefaultPanel\r\n    });\r\n  }\r\n  showActionsPanel = () => {\r\n    this.setState({\r\n      panel: PanelType.ActionsPanel\r\n    });\r\n  }\r\n  showRenamePanel = () => {\r\n    this.setState({\r\n      panel: PanelType.RenamePanel\r\n    });\r\n  }\r\n  render() {\r\n    let panel: JSX.Element | null;\r\n    switch (this.state.panel) {\r\n      case PanelType.DefaultPanel: {\r\n        panel =\r\n          <TodoPanel\r\n            todo={this.props.todo}\r\n            completeTodo={this.completeTodo}\r\n            showActionsPanel={this.showActionsPanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.ActionsPanel: {\r\n        panel =\r\n          <TodoActionsPanel\r\n            todo={this.props.todo}\r\n            deleteTodo={this.deleteTodo}\r\n            moveTodoUp={this.moveTodoUp}\r\n            moveTodoDown={this.moveTodoDown}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n            showRenamePanel={this.showRenamePanel}\r\n          />;\r\n        break;\r\n      }\r\n      case PanelType.RenamePanel: {\r\n        panel =\r\n          <TodoRenamePanel\r\n            todo={this.props.todo}\r\n            renameTodo={this.renameTodo}\r\n            showDefaultPanel={this.showDefaultPanel}\r\n          />;\r\n        break;\r\n      }\r\n      default: {\r\n        panel = null;\r\n        break;\r\n      }\r\n    }\r\n    return panel;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-list-item.tsx","import * as React from \"react\";\r\nimport { CompletedTodo, Todo, TodoIdType } from \"../domain/todo\";\r\nimport { CompletedTodoList } from \"./completed-todo-list\";\r\nimport { TodoAddForm } from \"./todo-add-form\";\r\nimport { TodoList } from \"./todo-list\";\r\n\r\nexport interface TodoListPanelProps {\r\n  todos: Todo[];\r\n  completedTodos: CompletedTodo[];\r\n  addTodo(name: string): void;\r\n  completeTodo(id: TodoIdType): void;\r\n  uncompleteTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class TodoListPanel extends React.PureComponent<TodoListPanelProps> {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <TodoAddForm addTodo={this.props.addTodo} />\r\n        <br />\r\n        <h3 className=\"sr-only\">To-dos</h3>\r\n        <TodoList\r\n          todos={this.props.todos}\r\n          completeTodo={this.props.completeTodo}\r\n          deleteTodo={this.props.deleteTodo}\r\n          moveTodoUp={this.props.moveTodoUp}\r\n          moveTodoDown={this.props.moveTodoDown}\r\n          renameTodo={this.props.renameTodo}\r\n        />\r\n        {this.props.completedTodos.length\r\n          ? <div>\r\n            <h3 className=\"sr-only\">Completed To-dos</h3>\r\n            <CompletedTodoList\r\n              todos={this.props.completedTodos}\r\n              uncompleteTodo={this.props.uncompleteTodo}\r\n              deleteTodo={this.props.deleteTodo}\r\n              renameTodo={this.props.renameTodo}\r\n            />\r\n          </div>\r\n          : null\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-list-panel.tsx","import * as React from \"react\";\r\nimport { Todo, TodoIdType } from \"../domain/todo\";\r\nimport { TodoListItem } from \"./todo-list-item\";\r\n\r\nexport interface TodoListProps {\r\n  todos: Todo[];\r\n  completeTodo(id: TodoIdType): void;\r\n  deleteTodo(id: TodoIdType): void;\r\n  moveTodoUp(id: TodoIdType): void;\r\n  moveTodoDown(id: TodoIdType): void;\r\n  renameTodo(id: TodoIdType, name: string): void;\r\n}\r\n\r\nexport class TodoList extends React.PureComponent<TodoListProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group\">\r\n        {this.props.todos.map(todo =>\r\n          <TodoListItem\r\n            key={todo.id}\r\n            todo={todo}\r\n            completeTodo={this.props.completeTodo}\r\n            deleteTodo={this.props.deleteTodo}\r\n            moveTodoUp={this.props.moveTodoUp}\r\n            moveTodoDown={this.props.moveTodoDown}\r\n            renameTodo={this.props.renameTodo}\r\n          />)}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-list.tsx","import * as React from \"react\";\r\n\r\nexport interface TodoMoveDownBtnProps {\r\n  moveTodoDown(): void;\r\n}\r\n\r\nexport class TodoMoveDownBtn extends React.PureComponent<TodoMoveDownBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.moveTodoDown} type=\"button\" className=\"btn btn-link\" aria-label=\"Move down\">\r\n        <span className=\"glyphicon glyphicon-chevron-down\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-move-down-btn.tsx","import * as React from \"react\";\r\n\r\nexport interface TodoMoveUpBtnProps {\r\n  moveTodoUp(): void;\r\n}\r\n\r\nexport class TodoMoveUpBtn extends React.PureComponent<TodoMoveUpBtnProps> {\r\n  render() {\r\n    return (\r\n      <button onClick={this.props.moveTodoUp} type=\"button\" className=\"btn btn-link\" aria-label=\"Move up\">\r\n        <span className=\"glyphicon glyphicon-chevron-up\" aria-hidden=\"true\" />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-move-up-btn.tsx","import * as React from \"react\";\r\nimport { findDOMNode } from \"react-dom\";\r\nimport { Todo } from \"../domain/todo\";\r\nimport { TodoPanelBtnGroup } from \"./todo-panel-btn-group\";\r\nimport { TodoTitle } from \"./todo-title\";\r\n\r\nexport interface TodoPanelProps {\r\n  todo: Todo;\r\n  completeTodo(): void;\r\n  showActionsPanel(): void;\r\n}\r\n\r\nexport class TodoPanel extends React.PureComponent<TodoPanelProps> {\r\n  btnGroup: HTMLElement;\r\n  btnGroupRef: React.Ref<TodoPanelBtnGroup> = comp => {\r\n    if (comp) {\r\n      this.btnGroup = findDOMNode(comp);\r\n    }\r\n  }\r\n  onClick: React.MouseEventHandler<HTMLAnchorElement> = e => {\r\n    if (!this.btnGroup.contains(e.target as HTMLElement)) {\r\n      this.props.completeTodo();\r\n    }\r\n  }\r\n  render() {\r\n    return (\r\n      <a onClick={this.onClick} className=\"list-group-item\">\r\n        <div className=\"todo-list-todo-panel\">\r\n          <TodoTitle title={this.props.todo.name} />\r\n          <TodoPanelBtnGroup\r\n            ref={this.btnGroupRef}\r\n            showActionsPanel={this.props.showActionsPanel} />\r\n        </div>\r\n      </a>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-panel.tsx","import * as React from \"react\";\r\nimport { Todo } from \"../domain/todo\";\r\nimport { TodoRenameForm } from \"./todo-rename-form\";\r\n\r\nexport interface TodoRenamePanelProps {\r\n  todo: Todo;\r\n  renameTodo(name: string): void;\r\n  showDefaultPanel(): void;\r\n}\r\n\r\nexport class TodoRenamePanel extends React.PureComponent<TodoRenamePanelProps> {\r\n  render() {\r\n    return (\r\n      <div className=\"list-group-item\">\r\n        <TodoRenameForm {...this.props} />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./components/todo-rename-panel.tsx","import { AggregateIdType, DomainEvent, DomainEventType, UncommittedDomainEvent } from \"../event-store\";\r\n\r\nexport type DomainEventHandler = (e: UncommittedDomainEvent) => void;\r\n\r\nexport abstract class AggregateRoot {\r\n    [key: string]: any;\r\n    private _uncommittedEvents: UncommittedDomainEvent[];\r\n    get uncommittedEvents(): UncommittedDomainEvent[] {\r\n        return this._uncommittedEvents;\r\n    }\r\n    protected _id: AggregateIdType;\r\n    get id(): AggregateIdType {\r\n        return this._id;\r\n    }\r\n    protected init(): void {\r\n        this._uncommittedEvents = new Array<UncommittedDomainEvent>();\r\n    }\r\n    constructor(events: DomainEvent[]) {\r\n        this.init();\r\n        for (const e of events) {\r\n            (this[DomainEventType[e.type]] as DomainEventHandler)(e);\r\n        }\r\n    }\r\n    protected applyAndStage(e: UncommittedDomainEvent): void {\r\n        (this[DomainEventType[e.type]] as DomainEventHandler)(e);\r\n        this._uncommittedEvents.push(e);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./domain/aggregate-root.ts","import { AggregateIdType, DomainEventType, UncommittedDomainEvent } from \"../event-store\";\r\nimport { TodoIdType } from \"./todo\";\r\n\r\nexport class TodoAdded implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoAdded;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoName: string,\r\n    ) { }\r\n}\r\n\r\nexport class TodoRemoved implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoRemoved;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n    ) { }\r\n}\r\n\r\nexport class TodoCompleted implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoCompleted;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoCompletionTimestamp: number,\r\n    ) { }\r\n}\r\n\r\nexport class TodoUncompleted implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoUncompleted;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n    ) { }\r\n}\r\n\r\nexport class TodoRenamed implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoRenamed;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoName: string,\r\n    ) { }\r\n}\r\n\r\nexport class TodoPositionChanged implements UncommittedDomainEvent {\r\n    readonly type = DomainEventType.TodoPositionChanged;\r\n    constructor(\r\n        readonly aggregateId: AggregateIdType,\r\n        readonly todoId: TodoIdType,\r\n        readonly todoOffset: number,\r\n    ) { }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./domain/events.ts","import { v4 as uuid } from \"uuid\";\r\nimport { AggregateRoot } from \"./aggregate-root\";\r\nimport { TodoAdded, TodoCompleted, TodoPositionChanged, TodoRemoved, TodoRenamed, TodoUncompleted } from \"./events\";\r\nimport { CompletedTodo, Todo, TodoIdType } from \"./todo\";\r\n\r\nexport class TodoList extends AggregateRoot {\r\n    protected _todos: (Todo | CompletedTodo)[];\r\n    get todos(): Todo[] {\r\n        return this._todos.filter(x => !x.isCompleted);\r\n    }\r\n    get completedTodos(): CompletedTodo[] {\r\n        return (this._todos.filter(x => x.isCompleted) as CompletedTodo[])\r\n            .sort((x, y) => y.completionTimestamp - x.completionTimestamp);\r\n    }\r\n    protected init(): void {\r\n        super.init();\r\n        this._todos = [];\r\n    }\r\n\r\n    // Domain Event Handlers\r\n    protected TodoAdded(e: TodoAdded): void {\r\n        if (!this.id) {\r\n            this._id = e.aggregateId;\r\n        }\r\n        this._todos.push(new Todo(e.todoId, e.todoName));\r\n    }\r\n    protected TodoRemoved(e: TodoRemoved): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            this._todos.splice(i, 1);\r\n        }\r\n    }\r\n    protected TodoCompleted(e: TodoCompleted): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new CompletedTodo(oldTodo.id, oldTodo.name, e.todoCompletionTimestamp);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    protected TodoUncompleted(e: TodoUncompleted): void {\r\n        let i = this._todos.findIndex(x => x.id === e.todoId);\r\n        if (i !== -1) {\r\n            let oldTodo = this._todos[i];\r\n            let newTodo = new Todo(oldTodo.id, oldTodo.name);\r\n            this._todos[i] = newTodo;\r\n        }\r\n    }\r\n    protected TodoRenamed(e: TodoRenamed): void {\r\n        let todo = this._todos.find(x => x.id === e.todoId);\r\n        if (todo) {\r\n            todo.name = e.todoName;\r\n        }\r\n    }\r\n    protected TodoPositionChanged(e: TodoPositionChanged): void {\r\n        let incompleteTodoPositions: number[] = this._todos.reduce<number[]>((p, c, i) => {\r\n            if (!c.isCompleted) {\r\n                p.push(i);\r\n            }\r\n            return p;\r\n        }, []);\r\n        let from = incompleteTodoPositions.findIndex(x => this._todos[x].id === e.todoId);\r\n        if (from === -1) {\r\n            return;\r\n        }\r\n        let to = from + e.todoOffset;\r\n        if (to < 0) {\r\n            to = 0;\r\n        } else if (to > incompleteTodoPositions.length - 1) {\r\n            to = incompleteTodoPositions.length - 1;\r\n        }\r\n        if (from === to) {\r\n            return;\r\n        }\r\n        if (to < from) {\r\n            for (let i = to; i < from; i++) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        } else {\r\n            for (let i = to; i > from; i--) {\r\n                arraySwap(this._todos, incompleteTodoPositions[from], incompleteTodoPositions[i]);\r\n            }\r\n        }\r\n        function arraySwap(arr: any[], x: number, y: number): void {\r\n            let a = arr[x];\r\n            arr[x] = arr[y];\r\n            arr[y] = a;\r\n        }\r\n    }\r\n\r\n    add(id: TodoIdType, name: string): void {\r\n        let agId = this.id || uuid();\r\n        this.applyAndStage(new TodoAdded(agId, id, name));\r\n    }\r\n    remove(id: TodoIdType): void {\r\n        this.applyAndStage(new TodoRemoved(this.id, id));\r\n    }\r\n    complete(id: TodoIdType, completionTimestamp: number): void {\r\n        this.applyAndStage(new TodoCompleted(this.id, id, completionTimestamp));\r\n    }\r\n    uncomplete(id: TodoIdType): void {\r\n        this.applyAndStage(new TodoUncompleted(this.id, id));\r\n    }\r\n    rename(id: TodoIdType, name: string): void {\r\n        this.applyAndStage(new TodoRenamed(this.id, id, name));\r\n    }\r\n    changePosition(id: TodoIdType, offset: number): void {\r\n        this.applyAndStage(new TodoPositionChanged(this.id, id, offset));\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./domain/todo-list.ts","export type TodoIdType = string;\r\n\r\nexport class Todo {\r\n    readonly isCompleted: boolean = false;\r\n    constructor(\r\n        readonly id: TodoIdType,\r\n        public name: string,\r\n    ) { }\r\n}\r\n\r\nexport class CompletedTodo extends Todo {\r\n    readonly isCompleted: boolean = true;\r\n    constructor(\r\n        id: TodoIdType,\r\n        name: string,\r\n        readonly completionTimestamp: number,\r\n    ) {\r\n        super(id, name);\r\n    }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./~/tslint-loader!./domain/todo.ts","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/v1.js\n// module id = 46\n// module chunks = 0","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/uuid/v4.js\n// module id = 47\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 48\n// module chunks = 0"],"sourceRoot":""}