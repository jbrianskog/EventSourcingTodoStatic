!function(t){function e(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var o={};e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=29)}([function(t,e,o){"use strict";function n(t){let e="template#"+t,o=document.querySelector(e);if(!o)throw new Error(`Document missing required '${e}' element`);return document.importNode(o.content,!0)}function r(t,e,o){let n=i(t,e);Array.prototype.forEach.call(n,t=>{t.innerHTML="";t.appendChild(o)})}function i(t,e){return a(t,`[data-estd-controller='${e}']`)}function l(t,e,o){let n=s(t,e);Array.prototype.forEach.call(n,t=>{t.textContent=o})}function s(t,e){return a(t,`[data-estd-content='${e}']`)}function d(t,e,o){let n=c(t,e);Array.prototype.forEach.call(n,t=>{t.setAttribute(e,o)})}function c(t,e){return a(t,`[data-estd-attr='${e}']`)}function u(t,e){let o=t.querySelector(e);if(!o)throw new Error(`'${t}' missing required '${e}' element`);return o}function a(t,e){let o=t.querySelectorAll(e);if(!o.length)throw new Error(`'${t}' missing required '${e}' element`);return o}function f(t,e){let o=t.getAttribute(e);if(!o)throw new Error(`'${t}' missing required '${e}' attribute`);return o}Object.defineProperty(e,"__esModule",{value:!0}),e.templateClone=n,e.fillControllerElements=r,e.fillContentElements=l,e.setAttrElements=d,e.findElement=u,e.getRequiredAttribute=f},function(t,e,o){"use strict";function n(t,e){return l(this,void 0,void 0,function*(){let o=yield c.domainEventsByAggregate(e),n=new d.TodoList(o);u.fillControllerElements(document,"incompleteTodoListController",t.incompleteTodoListController(t,n.todos)),u.fillControllerElements(document,"completedTodoListController",t.completedTodoListController(t,n.completedTodos)),u.fillControllerElements(document,"eventListController",t.eventListController(t,o))})}function r(t,e){return l(this,void 0,void 0,function*(){let o=yield c.domainEventsByAggregate(e);u.fillControllerElements(document,"bodyController",t.bodyController(t,o))})}function i(t){function e(){r.removeClass("has-error"),i.removeClass("btn-danger").addClass("btn-success"),r.off(l),n.off(l)}let o=t.currentTarget,n=$(o),r=n.closest("form"),i=n.next().children("button");r.addClass("has-error"),i.removeClass("btn-success").addClass("btn-danger");let l=".nameTodoInputValidation:"+s.v4();n.on("input"+l,()=>{o.validity.valid&&e()}),r.on("focusout"+l,t=>{t.currentTarget.contains(t.relatedTarget)||e()})}var l=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function l(t){try{d(n.next(t))}catch(t){i(t)}}function s(t){try{d(n.throw(t))}catch(t){i(t)}}function d(t){t.done?r(t.value):new o(function(e){e(t.value)}).then(l,s)}d((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const s=o(3),d=o(4),c=o(2),u=o(0);e.todoIdDataAttrName="data-estd-todo-id",e.eventIdDataAttrName="data-estd-event-id",e.refreshLists=n,e.refreshBody=r,e.invalidNameInputHandler=i},function(t,e,o){"use strict";function n(){return s(this,void 0,void 0,function*(){return yield d.default.open(c,1,t=>{switch(t.oldVersion){case 0:t.createObjectStore(u,{autoIncrement:!0,keyPath:f}).createIndex(a,a)}})})}function r(t){return s(this,void 0,void 0,function*(){function e(t){t&&(r.push(t.value),t.continue())}let o=yield n(),r=[],i=o.transaction(u),l=i.objectStore(u);return t?l.iterateCursor(IDBKeyRange.upperBound(t),e):l.iterateCursor(e),yield i.complete,r})}function i(t,e){return s(this,void 0,void 0,function*(){function t(t){if(t){let o=t.value;(!e||o.id<=e)&&r.push(o),t.continue()}}let o=yield n(),r=[],i=o.transaction(u);return i.objectStore(u).index(a).iterateCursor(t),yield i.complete,r})}function l(t){return s(this,void 0,void 0,function*(){let e=yield n(),o=e.transaction(u,"readwrite"),r=o.objectStore(u),i=[];for(const e of t)i.push(r.add(e));yield Promise.all(i),yield o.complete})}var s=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function l(t){try{d(n.next(t))}catch(t){i(t)}}function s(t){try{d(n.throw(t))}catch(t){i(t)}}function d(t){t.done?r(t.value):new o(function(e){e(t.value)}).then(l,s)}d((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const d=o(28);!function(t){t[t.TodoAdded=0]="TodoAdded",t[t.TodoRemoved=1]="TodoRemoved",t[t.TodoCompleted=2]="TodoCompleted",t[t.TodoUncompleted=3]="TodoUncompleted",t[t.TodoRenamed=4]="TodoRenamed",t[t.TodoPositionChanged=5]="TodoPositionChanged"}(e.DomainEventType||(e.DomainEventType={}));const c="estd-db",u="domain-event",a="aggregateId",f="id";e.allDomainEvents=r,e.domainEventsByAggregate=i,e.postDomainEvents=l},function(t,e,o){var n=o(33),r=o(34),i=r;i.v1=n,i.v4=r,t.exports=i},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=o(3),r=o(30),i=o(31),l=o(32);class s extends r.AggregateRoot{get todos(){return this._todos.filter(t=>!t.isCompleted)}get completedTodos(){return this._todos.filter(t=>t.isCompleted).sort((t,e)=>e.completionTimestamp-t.completionTimestamp)}init(){super.init(),this._todos=[]}TodoAdded(t){this.id||(this._id=t.aggregateId),this._todos.push(new l.Todo(t.todoId,t.todoName))}TodoRemoved(t){let e=this._todos.findIndex(e=>e.id===t.todoId);-1!==e&&this._todos.splice(e,1)}TodoCompleted(t){let e=this._todos.findIndex(e=>e.id===t.todoId);if(-1!==e){let o=this._todos[e],n=new l.CompletedTodo(o.id,o.name,t.todoCompletionTimestamp);this._todos[e]=n}}TodoUncompleted(t){let e=this._todos.findIndex(e=>e.id===t.todoId);if(-1!==e){let t=this._todos[e],o=new l.Todo(t.id,t.name);this._todos[e]=o}}TodoRenamed(t){let e=this._todos.find(e=>e.id===t.todoId);e&&(e.name=t.todoName)}TodoPositionChanged(t){function e(t,e,o){let n=t[e];t[e]=t[o],t[o]=n}let o=this._todos.reduce((t,e,o)=>{e.isCompleted||t.push(o);return t},[]),n=o.findIndex(e=>this._todos[e].id===t.todoId);if(-1!==n){let r=n+t.todoOffset;if(r<0?r=0:r>o.length-1&&(r=o.length-1),n!==r)if(r<n)for(let t=r;t<n;t++)e(this._todos,o[n],o[t]);else for(let t=r;t>n;t--)e(this._todos,o[n],o[t])}}add(t,e){let o=this.id||n.v4();this.applyAndStage(new i.TodoAdded(o,t,e))}remove(t){this.applyAndStage(new i.TodoRemoved(this.id,t))}complete(t,e){this.applyAndStage(new i.TodoCompleted(this.id,t,e))}uncomplete(t){this.applyAndStage(new i.TodoUncompleted(this.id,t))}rename(t,e){this.applyAndStage(new i.TodoRenamed(this.id,t,e))}changePosition(t,e){this.applyAndStage(new i.TodoPositionChanged(this.id,t,e))}}e.TodoList=s},function(t,e,o){"use strict";function n(t,e){let o=e.isCompleted?r.templateClone("historyCompletedTodoTemplate"):r.templateClone("historyTodoTemplate");return r.fillControllerElements(o,"historyTodoTitlePanelController",t.historyTodoTitlePanelController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.historyTodoController=n},function(t,e,o){"use strict";function n(){return i(this,void 0,void 0,function*(){let t=yield l.allDomainEvents(),e=r(t);return e.length?yield l.domainEventsByAggregate(e[0]):[]})}function r(t){return t.reduce((t,e)=>{e.type===l.DomainEventType.TodoAdded&&-1===t.indexOf(e.aggregateId)&&t.push(e.aggregateId);return t},[])}var i=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function l(t){try{d(n.next(t))}catch(t){i(t)}}function s(t){try{d(n.throw(t))}catch(t){i(t)}}function d(t){t.done?r(t.value):new o(function(e){e(t.value)}).then(l,s)}d((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const l=o(2);e.todoListEvents=n},function(t,e){function o(t,e){var o=e||0,r=n;return r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+"-"+r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]+r[t[o++]]}for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=o},function(t,e,o){(function(e){var o,n=e.crypto||e.msCrypto;if(n&&n.getRandomValues){var r=new Uint8Array(16);o=function(){return n.getRandomValues(r),r}}if(!o){var i=new Array(16);o=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}t.exports=o}).call(e,o(35))},function(t,e){},function(t,e,o){"use strict";function n(t,e){function o(){return r(this,void 0,void 0,function*(){let o=e?yield d.domainEventsByAggregate(e):yield c.todoListEvents(),n=new s.TodoList(o);n.add(i.v4(),f.value),a.reset(),e=n.id,yield d.postDomainEvents(n.uncommittedEvents),yield t.refreshLists(t,e)})}let n=u.templateClone("addTodoFormTemplate"),a=u.findElement(n,"#addTodoForm"),f=u.findElement(a,"#addTodoInput");return $(f).on("invalid",l.invalidNameInputHandler),$(a).submit(t=>{t.preventDefault();o().catch(console.log)}),n}var r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function l(t){try{d(n.next(t))}catch(t){i(t)}}function s(t){try{d(n.throw(t))}catch(t){i(t)}}function d(t){t.done?r(t.value):new o(function(e){e(t.value)}).then(l,s)}d((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=o(3),l=o(1),s=o(4),d=o(2),c=o(6),u=o(0);e.addTodoFormController=n},function(t,e,o){"use strict";function n(t,e){let o=r.templateClone("bodyTemplate");return r.fillControllerElements(o,"todoListPanelController",t.todoListPanelController(t,e)),r.fillControllerElements(o,"eventListController",t.eventListController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.bodyController=n},function(t,e,o){"use strict";function n(t,e){if(!e.length)return document.createDocumentFragment();let o=r.templateClone("completedTodoListTemplate");return r.fillControllerElements(o,"todoListController",t.todoListController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.completedTodoListController=n},function(t,e,o){"use strict";function n(t,e){if(!e.length)return l.templateClone("emptyEventListTemplate");let o=e[0].aggregateId,n=l.templateClone("eventListTemplate"),d=Object.assign({},t);d.todoController=s.historyTodoController;let c=l.findElement(n,"#eventListDelegatedEventTarget");return $(c).on("click",".event-list-item",n=>{let s=".activeEventFocusOut:"+r.v4();$(document).on(`click${s} keypress${s}`,e=>{if(n.originalEvent===e.originalEvent||"keypress"===e.type&&13!==e.which||n.currentTarget.contains(e.target))return;$(document).off(s);c.contains(e.target)||t.refreshBody(t,o).catch(console.log)});let u=l.getRequiredAttribute(n.currentTarget,i.eventIdDataAttrName);let a=e.slice(0,parseInt(u,10));l.fillControllerElements(document,"todoListPanelController",d.historyTodoListPanelController(d,a))}),l.fillControllerElements(n,"eventListGroupController",t.eventListGroupController(t,e)),n}Object.defineProperty(e,"__esModule",{value:!0});const r=o(3),i=o(1),l=o(0),s=o(5);e.eventListController=n},function(t,e,o){"use strict";function n(t,e){if(e.length){let o=document.createDocumentFragment();return e.forEach(e=>{let n=i.templateClone("eventListItemTemplate");i.setAttrElements(n,r.eventIdDataAttrName,e.id.toString());i.fillControllerElements(n,"eventTextController",t.eventTextController(t,e));o.appendChild(n)}),o}{let t=i.templateClone("emptyEventListTemplate");return t}}Object.defineProperty(e,"__esModule",{value:!0});const r=o(1),i=o(0);e.eventListGroupController=n},function(t,e,o){"use strict";function n(t,e){let o=document.createDocumentFragment();return o.textContent=`${e.id} : ${r.DomainEventType[e.type]}`,o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(2);e.eventTextController=n},function(t,e,o){"use strict";function n(t,e){let o=i.templateClone("historyTodoListPanelTemplate"),n=new r.TodoList(e);return i.fillControllerElements(o,"incompleteTodoListController",t.incompleteTodoListController(t,n.todos)),i.fillControllerElements(o,"completedTodoListController",t.completedTodoListController(t,n.completedTodos)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(4),i=o(0);e.historyTodoListPanelController=n},function(t,e,o){"use strict";function n(t,e){let o=r.templateClone("historyTodoTitlePanelTemplate");return r.fillControllerElements(o,"todoTitleController",t.todoTitleController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.historyTodoTitlePanelController=n},function(t,e,o){"use strict";function n(t,e){if(!e.length)return document.createDocumentFragment();let o=r.templateClone("incompleteTodoListTemplate");return r.fillControllerElements(o,"todoListController",t.todoListController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.incompleteTodoListController=n},function(t,e,o){"use strict";function n(t,e){let o=i.templateClone("todoDeleteBtnTemplate");return e.isCompleted||(o.appendChild(i.templateClone("todoMoveUpBtnTemplate")),o.appendChild(i.templateClone("todoMoveDownBtnTemplate"))),o.appendChild(i.templateClone("todoRenameBtnTemplate")),i.setAttrElements(o,r.todoIdDataAttrName,e.id),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(1),i=o(0);e.todoActionsPanelButtonsController=n},function(t,e,o){"use strict";function n(t,e){let o=r.templateClone("todoActionsPanelTemplate");return r.fillControllerElements(o,"todoTitleController",t.todoTitleController(t,e)),r.fillControllerElements(o,"todoActionsPanelButtonsController",t.todoActionsPanelButtonsController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.todoActionsPanelController=n},function(t,e,o){"use strict";function n(t,e){let o=e.isCompleted?i.templateClone("completedTodoTemplate"):i.templateClone("todoTemplate");return i.setAttrElements(o,r.todoIdDataAttrName,e.id),i.fillControllerElements(o,"todoTitlePanelController",t.todoTitlePanelController(t,e)),i.fillControllerElements(o,"todoActionsPanelController",t.todoActionsPanelController(t,e)),i.fillControllerElements(o,"todoRenamePanelController",t.todoRenamePanelController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(1),i=o(0);e.todoController=n},function(t,e,o){"use strict";function n(t,e){let o=r.templateClone("todoListTemplate");return r.fillControllerElements(o,"todoListGroupController",t.todoListGroupController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.todoListController=n},function(t,e,o){"use strict";function n(t,e){let o=document.createDocumentFragment();for(const n of e)o.appendChild(t.todoController(t,n));return o}Object.defineProperty(e,"__esModule",{value:!0}),e.todoListGroupController=n},function(t,e,o){"use strict";function n(t,e){function o(t,e){if("keypress"!==t.type||13===t.which){let o=$(t.currentTarget).find(".todoActionsBtn")[0];o===t.target||$.contains(o,t.target)||n(t,(t,o)=>{e?t.complete(o,Date.now()):t.uncomplete(o)}).catch(console.log)}}function n(e,o){return r(this,void 0,void 0,function*(){let n=yield d.domainEventsByAggregate(f),r=new s.TodoList(n),i=c.getRequiredAttribute(e.currentTarget,l.todoIdDataAttrName);o(r,i),yield d.postDomainEvents(r.uncommittedEvents),yield t.refreshLists(t,f)})}let u=c.templateClone("todoListPanelTemplate"),a=new s.TodoList(e),f=a.id,p=$(c.findElement(u,"#todolistDelegatedEventTarget"));return p.on("click keypress",".completeTodoBtn",t=>{o(t,!0)}),p.on("click keypress",".uncompleteTodoBtn",t=>{o(t,!1)}),p.on("click",".moveTodoUpBtn",t=>{n(t,(t,e)=>{t.changePosition(e,-1)}).catch(console.log)}),p.on("click",".moveTodoDownBtn",t=>{n(t,(t,e)=>{t.changePosition(e,1)}).catch(console.log)}),p.on("click",".deleteTodoBtn",t=>{n(t,(t,e)=>{t.remove(e)}).catch(console.log)}),p.on("submit",".renameTodoForm",t=>{t.preventDefault();let e=$(t.currentTarget).find("input[name='name']").val();n(t,(t,o)=>{t.rename(o,e)}).catch(console.log)}),p.on("click",".todoActionsBtn",t=>{let e=$(t.currentTarget).closest(".todoPanelDefault");let o=e.next();let n=e.add(o);let r=o.find(".todoActionsPanelBtnGroup")[0];let l="click.todoActionsPanelClose:"+i.v4();n.toggle();$(document).on(l,e=>{if(t.originalEvent===e.originalEvent)return;$.contains(r,e.target)||n.toggle();$(document).off(l)})}),p.on("click",".renameTodoBtn",t=>{let e=$(t.currentTarget).closest(".todoActionsPanel");let o=e.next();e.add(o).toggle();o.find(".renameTodoBtnClickFocusTarget").first().focus()}),p.on("blur",".renameTodoForm",t=>{if(!t.relatedTarget||!$.contains(t.currentTarget,t.relatedTarget)){let e=$(t.currentTarget).closest(".todoRenamePanel");e.prev().prev().add(e).toggle()}}),c.fillControllerElements(u,"addTodoFormController",t.addTodoFormController(t,f)),c.fillControllerElements(u,"incompleteTodoListController",t.incompleteTodoListController(t,a.todos)),c.fillControllerElements(u,"completedTodoListController",t.completedTodoListController(t,a.completedTodos)),u}var r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(r,i){function l(t){try{d(n.next(t))}catch(t){i(t)}}function s(t){try{d(n.throw(t))}catch(t){i(t)}}function d(t){t.done?r(t.value):new o(function(e){e(t.value)}).then(l,s)}d((n=n.apply(t,e||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0});const i=o(3),l=o(1),s=o(4),d=o(2),c=o(0);e.todoListPanelController=n},function(t,e,o){"use strict";function n(t,e){let o=i.templateClone("todoRenamePanelTemplate"),n=i.findElement(o,"input[name='name']"),l=n.getAttribute("id"),s=`${l}-${e.id}`,d=i.findElement(o,`label[for='${l}']`);return n.setAttribute("id",s),n.setAttribute("value",e.name),d.setAttribute("for",s),i.setAttrElements(o,r.todoIdDataAttrName,e.id),$(n).on("invalid",r.invalidNameInputHandler),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(1),i=o(0);e.todoRenamePanelController=n},function(t,e,o){"use strict";function n(t,e){let o=document.createDocumentFragment();if(o.textContent=e.name,e.isCompleted){let t=r.templateClone("todoCompletionDateTemplate"),n=new Date(e.completionTimestamp);r.fillContentElements(t,"completionDate",n.toLocaleDateString()),o.appendChild(t)}return o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.todoTitleController=n},function(t,e,o){"use strict";function n(t,e){let o=r.templateClone("todoTitlePanelTemplate");return r.fillControllerElements(o,"todoTitleController",t.todoTitleController(t,e)),o}Object.defineProperty(e,"__esModule",{value:!0});const r=o(0);e.todoTitlePanelController=n},function(t,e,o){"use strict";!function(){function e(t){return Array.prototype.slice.call(t)}function o(t){return new Promise(function(e,o){t.onsuccess=function(){e(t.result)},t.onerror=function(){o(t.error)}})}function n(t,e,n){var r,i=new Promise(function(i,l){r=t[e].apply(t,n),o(r).then(i,l)});return i.request=r,i}function r(t,e,o){var r=n(t,e,o);return r.then(function(t){if(t)return new u(t,r.request)})}function i(t,e,o){o.forEach(function(o){Object.defineProperty(t.prototype,o,{get:function(){return this[e][o]},set:function(t){this[e][o]=t}})})}function l(t,e,o,r){r.forEach(function(r){r in o.prototype&&(t.prototype[r]=function(){return n(this[e],r,arguments)})})}function s(t,e,o,n){n.forEach(function(n){n in o.prototype&&(t.prototype[n]=function(){return this[e][n].apply(this[e],arguments)})})}function d(t,e,o,n){n.forEach(function(n){n in o.prototype&&(t.prototype[n]=function(){return r(this[e],n,arguments)})})}function c(t){this._index=t}function u(t,e){this._cursor=t,this._request=e}function a(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise(function(e,o){t.oncomplete=function(){e()},t.onerror=function(){o(t.error)},t.onabort=function(){o(t.error)}})}function p(t,e,o){this._db=t,this.oldVersion=e,this.transaction=new f(o)}function m(t){this._db=t}i(c,"_index",["name","keyPath","multiEntry","unique"]),l(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),d(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),i(u,"_cursor",["direction","key","primaryKey","value"]),l(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(t){t in IDBCursor.prototype&&(u.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then(function(){return e._cursor[t].apply(e._cursor,n),o(e._request).then(function(t){if(t)return new u(t,e._request)})})})}),a.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},a.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},i(a,"_store",["name","keyPath","indexNames","autoIncrement"]),l(a,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),d(a,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(a,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new a(this._tx.objectStore.apply(this._tx,arguments))},i(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new a(this._db.createObjectStore.apply(this._db,arguments))},i(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),m.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},i(m,"_db",["name","version","objectStoreNames"]),s(m,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(t){[a,c].forEach(function(o){o.prototype[t.replace("open","iterate")]=function(){var o=e(arguments),n=o[o.length-1],r=this._store||this._index,i=r[t].apply(r,o.slice(0,-1));i.onsuccess=function(){n(i.result)}}})}),[c,a].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var o=this,n=[];return new Promise(function(r){o.iterateCursor(t,function(t){return t?(n.push(t.value),void 0!==e&&n.length==e?void r(n):void t.continue()):void r(n)})})})});var h={open:function(t,e,o){var r=n(indexedDB,"open",[t,e]),i=r.request;return i.onupgradeneeded=function(t){o&&o(new p(i.result,t.oldVersion,i.transaction))},r.then(function(t){return new m(t)})},delete:function(t){return n(indexedDB,"deleteDatabase",[t])}};t.exports=h,t.exports.default=t.exports}()},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=o(1),r=o(10),i=o(11),l=o(12),s=o(13),d=o(14),c=o(15),u=o(5),a=o(16),f=o(17),p=o(18),m=o(19),h=o(20),C=o(21),v=o(22),y=o(23),T=o(24),g=o(25),_=o(26),E=o(27),P=o(6);o(9);const b=o(0);window.indexedDB||window.alert("Your browser doesn't support IndexedDB (the browser feature this app uses to store your To-dos). Update your browser to its latest version.");const w={bodyController:i.bodyController,todoListPanelController:T.todoListPanelController,addTodoFormController:r.addTodoFormController,incompleteTodoListController:p.incompleteTodoListController,completedTodoListController:l.completedTodoListController,todoListController:v.todoListController,todoListGroupController:y.todoListGroupController,todoController:C.todoController,todoTitlePanelController:E.todoTitlePanelController,todoTitleController:_.todoTitleController,todoActionsPanelController:h.todoActionsPanelController,todoActionsPanelButtonsController:m.todoActionsPanelButtonsController,todoRenamePanelController:g.todoRenamePanelController,eventListController:s.eventListController,eventListGroupController:d.eventListGroupController,eventTextController:c.eventTextController,refreshLists:n.refreshLists,refreshBody:n.refreshBody,historyTodoListPanelController:a.historyTodoListPanelController,historyTodoController:u.historyTodoController,historyTodoTitlePanelController:f.historyTodoTitlePanelController};P.todoListEvents().then(t=>{b.fillControllerElements(document,"bodyController",w.bodyController(w,t))}).catch(console.log)},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=o(2);class r{get uncommittedEvents(){return this._uncommittedEvents}get id(){return this._id}init(){this._uncommittedEvents=new Array}constructor(t){this.init();for(const e of t)this[n.DomainEventType[e.type]](e)}applyAndStage(t){this[n.DomainEventType[t.type]](t),this._uncommittedEvents.push(t)}}e.AggregateRoot=r},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=o(2);class r{constructor(t,e,o){this.aggregateId=t,this.todoId=e,this.todoName=o,this.type=n.DomainEventType.TodoAdded}}e.TodoAdded=r;class i{constructor(t,e){this.aggregateId=t,this.todoId=e,this.type=n.DomainEventType.TodoRemoved}}e.TodoRemoved=i;class l{constructor(t,e,o){this.aggregateId=t,this.todoId=e,this.todoCompletionTimestamp=o,this.type=n.DomainEventType.TodoCompleted}}e.TodoCompleted=l;class s{constructor(t,e){this.aggregateId=t,this.todoId=e,this.type=n.DomainEventType.TodoUncompleted}}e.TodoUncompleted=s;class d{constructor(t,e,o){this.aggregateId=t,this.todoId=e,this.todoName=o,this.type=n.DomainEventType.TodoRenamed}}e.TodoRenamed=d;class c{constructor(t,e,o){this.aggregateId=t,this.todoId=e,this.todoOffset=o,this.type=n.DomainEventType.TodoPositionChanged}}e.TodoPositionChanged=c},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t,e){this.id=t,this.name=e,this.isCompleted=!1}}e.Todo=n;class r extends n{constructor(t,e,o){super(t,e),this.completionTimestamp=o,this.isCompleted=!0}}e.CompletedTodo=r},function(t,e,o){function n(t,e,o){var n=e&&o||0,r=e||[];t=t||{};var l=void 0!==t.clockseq?t.clockseq:d,a=void 0!==t.msecs?t.msecs:(new Date).getTime(),f=void 0!==t.nsecs?t.nsecs:u+1,p=a-c+(f-u)/1e4;if(p<0&&void 0===t.clockseq&&(l=l+1&16383),(p<0||a>c)&&void 0===t.nsecs&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=a,u=f,d=l,a+=122192928e5;var m=(1e4*(268435455&a)+f)%4294967296;r[n++]=m>>>24&255,r[n++]=m>>>16&255,r[n++]=m>>>8&255,r[n++]=255&m;var h=a/4294967296*1e4&268435455;r[n++]=h>>>8&255,r[n++]=255&h,r[n++]=h>>>24&15|16,r[n++]=h>>>16&255,r[n++]=l>>>8|128,r[n++]=255&l;for(var C=t.node||s,v=0;v<6;++v)r[n+v]=C[v];return e||i(r)}var r=o(8),i=o(7),l=r(),s=[1|l[0],l[1],l[2],l[3],l[4],l[5]],d=16383&(l[6]<<8|l[7]),c=0,u=0;t.exports=n},function(t,e,o){function n(t,e,o){var n=e&&o||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var l=t.random||(t.rng||r)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,e)for(var s=0;s<16;++s)e[n+s]=l[s];return e||i(l)}var r=o(8),i=o(7);t.exports=n},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}t.exports=o}]);
//# sourceMappingURL=bundle.2e9b51a73eef495c65f5.js.map