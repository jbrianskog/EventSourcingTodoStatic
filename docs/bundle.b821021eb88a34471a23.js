!function(e){function t(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var o={};t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,o,n){t.o(e,o)||Object.defineProperty(e,o,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=19)}([function(e,t){e.exports=React},function(e,t,o){"use strict";function n(){return a(this,void 0,void 0,function*(){return yield c.default.open(d,1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(l,{autoIncrement:!0,keyPath:p}).createIndex(u,u)}})})}function i(e){return a(this,void 0,void 0,function*(){function t(e){e&&(i.push(e.value),e.continue())}let o=yield n(),i=[],s=o.transaction(l),r=s.objectStore(l);return e?r.iterateCursor(IDBKeyRange.upperBound(e),t):r.iterateCursor(t),yield s.complete,i})}function s(e,t){return a(this,void 0,void 0,function*(){function o(e){if(e){let o=e.value;(!t||o.id<=t)&&s.push(o),e.continue()}}let i=yield n(),s=[],r=i.transaction(l);return r.objectStore(l).index(u).iterateCursor(e,o),yield r.complete,s})}function r(e){return a(this,void 0,void 0,function*(){let t=yield n(),o=t.transaction(l,"readwrite"),i=o.objectStore(l),s=[];for(const t of e)s.push(i.add(t));yield Promise.all(s),yield o.complete})}var a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const c=o(17);!function(e){e[e.TodoAdded=0]="TodoAdded",e[e.TodoRemoved=1]="TodoRemoved",e[e.TodoCompleted=2]="TodoCompleted",e[e.TodoUncompleted=3]="TodoUncompleted",e[e.TodoRenamed=4]="TodoRenamed",e[e.TodoPositionChanged=5]="TodoPositionChanged"}(t.DomainEventType||(t.DomainEventType={}));const d="estd-db",l="domain-event",u="aggregateId",p="id";t.allDomainEvents=i,t.domainEventsByAggregate=s,t.postDomainEvents=r},function(e,t){e.exports=ReactDOM},function(e,t,o){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function r(e,t){var r,m;return m=r=function(r){function m(){var e,t,o,s;n(this,m);for(var r=arguments.length,a=Array(r),c=0;c<r;c++)a[c]=arguments[c];return t=o=i(this,(e=m.__proto__||Object.getPrototypeOf(m)).call.apply(e,[this].concat(a))),o.__outsideClickHandler=null,o.enableOnClickOutside=function(){var e=o.__outsideClickHandler;if(e&&"undefined"!=typeof document){var t=o.props.eventTypes;t.forEach||(t=[t]),t.forEach(function(t){var n=o.props.preventDefault||-1===["touchstart","touchmove"].indexOf(t)?null:{passive:!0};document.addEventListener(t,e,n)})}},o.disableOnClickOutside=function(){var e=o.__outsideClickHandler;if(e&&"undefined"!=typeof document){var t=o.props.eventTypes;t.forEach||(t=[t]),t.forEach(function(t){return document.removeEventListener(t,e)})}},o.getRef=function(e){return o.instanceRef=e},s=t,i(o,s)}return s(m,r),l(m,[{key:"getInstance",value:function(){if(!e.prototype.isReactComponent)return this;var t=this.instanceRef;return t.getInstance?t.getInstance():t}},{key:"componentDidMount",value:function(){if("undefined"!=typeof document&&document.createElement){var e=this.getInstance();if(t&&"function"==typeof t.handleClickOutside){if(this.__clickOutsideHandlerProp=t.handleClickOutside(e),"function"!=typeof this.__clickOutsideHandlerProp)throw new Error("WrappedComponent lacks a function for processing outside click events specified by the handleClickOutside config option.")}else if("function"==typeof e.handleClickOutside)a.Component.prototype.isPrototypeOf(e)?this.__clickOutsideHandlerProp=e.handleClickOutside.bind(e):this.__clickOutsideHandlerProp=e.handleClickOutside;else{if("function"!=typeof e.props.handleClickOutside)throw new Error("WrappedComponent lacks a handleClickOutside(event) function for processing outside click events.");this.__clickOutsideHandlerProp=e.props.handleClickOutside}null!==o.i(c.findDOMNode)(e)&&this.addOutsideClickHandler()}}},{key:"componentWillReceiveProps",value:function(e){this.props.disableOnClickOutside&&!e.disableOnClickOutside?this.enableOnClickOutside():!this.props.disableOnClickOutside&&e.disableOnClickOutside&&this.disableOnClickOutside()}},{key:"componentDidUpdate",value:function(){var e=o.i(c.findDOMNode)(this.getInstance());return null===e&&this.__outsideClickHandler?void this.removeOutsideClickHandler():null===e||this.__outsideClickHandler?void 0:void this.addOutsideClickHandler()}},{key:"componentWillUnmount",value:function(){this.removeOutsideClickHandler()}},{key:"addOutsideClickHandler",value:function(){var e=this.__outsideClickHandler=o.i(d.a)(o.i(c.findDOMNode)(this.getInstance()),this.__clickOutsideHandlerProp,this.props.outsideClickIgnoreClass,this.props.excludeScrollbar,this.props.preventDefault,this.props.stopPropagation),t=u.length;u.push(this),p[t]=e,this.props.disableOnClickOutside||this.enableOnClickOutside()}},{key:"removeOutsideClickHandler",value:function(){this.disableOnClickOutside(),this.__outsideClickHandler=!1;var e=u.indexOf(this);e>-1&&(p[e]&&p.splice(e,1),u.splice(e,1))}},{key:"render",value:function(){var t=this,n=Object.keys(this.props).filter(function(e){return"excludeScrollbar"!==e}).reduce(function(e,o){return e[o]=t.props[o],e},{});return e.prototype.isReactComponent?n.ref=this.getRef:n.wrappedRef=this.getRef,n.disableOnClickOutside=this.disableOnClickOutside,n.enableOnClickOutside=this.enableOnClickOutside,o.i(a.createElement)(e,n)}}]),m}(a.Component),r.displayName="OnClickOutside("+(e.displayName||e.name||"Component")+")",r.defaultProps={eventTypes:["mousedown","touchstart"],excludeScrollbar:t&&t.excludeScrollbar||!1,outsideClickIgnoreClass:"ignore-react-onclickoutside",preventDefault:!1,stopPropagation:!1},r.getClass=function(){return e.getClass?e.getClass():e},m}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=o(0),c=(o.n(a),o(2)),d=(o.n(c),o(18)),l=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=[],p=[]},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{render(){return n.createElement("div",{className:"todo-list-todo-title"},this.props.title,n.createElement("br",null),n.createElement("small",null,"Completed on ",this.props.completionDate.toLocaleDateString()))}}t.CompletedTodoTitle=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{render(){return n.createElement("div",{className:"todo-list-todo-title"},this.props.title)}}t.TodoTitle=i},function(e,t,o){"use strict";function n(){return r(this,void 0,void 0,function*(){let e=yield a.allDomainEvents(),t=s(e);return t.length?yield a.domainEventsByAggregate(t[0]):[]})}function i(){return r(this,void 0,void 0,function*(){let e=yield a.allDomainEvents(),t=s(e);return t.length?t[0]:null})}function s(e){return e.reduce((e,t)=>{t.type===a.DomainEventType.TodoAdded&&-1===e.indexOf(t.aggregateId)&&e.push(t.aggregateId);return e},[])}var r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const a=o(1);t.todoListEvents=n,t.todoListId=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(3);class s extends n.PureComponent{constructor(){super(...arguments),this.handleClickOutside=(()=>{this.props.showDefaultPanel()})}render(){return n.createElement("div",{className:"todo-list-todo-btn-group"},n.createElement("div",{className:"btn-group",role:"group"},this.props.children))}}t.TodoActionsPanelBtnGroup=i.default(s)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.deleteTodo,type:"button",className:"btn btn-link","aria-label":"Delete"},n.createElement("span",{className:"glyphicon glyphicon-trash","aria-hidden":"true"}))}}t.TodoDeleteBtn=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{render(){return n.createElement("div",{className:"todo-list-todo-btn-group"},n.createElement("button",{onClick:this.props.showActionsPanel,type:"button",className:"btn btn-link","aria-label":"Actions"},n.createElement("span",{className:"glyphicon glyphicon-cog","aria-hidden":"true"})))}}t.TodoPanelBtnGroup=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.showRenamePanel,type:"button",className:"btn btn-link","aria-label":"Rename"},n.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"}))}}t.TodoRenameBtn=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(3);class s extends n.PureComponent{constructor(e){super(e),this.handleClickOutside=(()=>{this.props.showDefaultPanel()}),this.onChange=(e=>{this.setState({value:e.target.value})}),this.onSubmit=(e=>{e.preventDefault();this.props.renameTodo(this.state.value);this.props.showDefaultPanel()}),this.state={value:this.props.todo.name}}render(){let e="todoRenameInput-"+this.props.todo.id;return n.createElement("form",{role:"form",onSubmit:this.onSubmit},n.createElement("label",{htmlFor:e,className:"sr-only"},"New Name"),n.createElement("div",{className:"input-group"},n.createElement("input",{id:e,name:"name",type:"text",className:"form-control",onChange:this.onChange,value:this.state.value,required:!0}),n.createElement("span",{className:"input-group-btn"},n.createElement("button",{type:"submit",className:"btn btn-success","aria-label":"Rename To-do"},n.createElement("span",{className:"glyphicon glyphicon-pencil","aria-hidden":"true"})))))}}t.TodoRenameForm=i.default(s)},function(e,t,o){var n=o(46),i=o(47),s=i;s.v1=n,s.v4=i,e.exports=s},function(e,t){function o(e,t){var o=t||0,i=n;return i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+"-"+i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]+i[e[o++]]}for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=o},function(e,t,o){(function(t){var o,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);o=function(){return n.getRandomValues(i),i}}if(!o){var s=new Array(16);o=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),s[t]=e>>>((3&t)<<3)&255;return s}}e.exports=o}).call(t,o(48))},function(e,t){},function(e,t,o){"use strict";var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});const i=o(0),s=o(12),r=o(44),a=o(1),c=o(6),d=o(27),l=o(25),u=o(31),p=o(36);class m extends i.PureComponent{constructor(e){super(e),this.updateDomainTodoList=(e=>n(this,void 0,void 0,function*(){let t=this.state.todoListId?yield a.domainEventsByAggregate(this.state.todoListId):yield c.todoListEvents(),o=new r.TodoList(t);e(o),yield a.postDomainEvents(o.uncommittedEvents),this.setState({todoListId:o.id,events:yield a.domainEventsByAggregate(o.id)})})),this.addTodo=(e=>{this.updateDomainTodoList(t=>{t.add(s.v4(),e)}).catch(console.log)}),this.completeTodo=(e=>{this.updateDomainTodoList(t=>{t.complete(e,Date.now())}).catch(console.log)}),this.uncompleteTodo=(e=>{this.updateDomainTodoList(t=>{t.uncomplete(e)}).catch(console.log)}),this.deleteTodo=(e=>{this.updateDomainTodoList(t=>{t.remove(e)}).catch(console.log)}),this.moveTodoUp=(e=>{this.updateDomainTodoList(t=>{t.changePosition(e,-1)}).catch(console.log)}),this.moveTodoDown=(e=>{this.updateDomainTodoList(t=>{t.changePosition(e,1)}).catch(console.log)}),this.renametodo=((e,t)=>{this.updateDomainTodoList(o=>{o.rename(e,t)}).catch(console.log)}),this.showHistoryVersion=(e=>{this.setState({history:!0,historyVersion:e})}),this.showCurrentVersion=(()=>{a.domainEventsByAggregate(this.state.todoListId).then(e=>{this.setState({events:e,history:!1,historyVersion:0})}).catch(console.log)}),this.state={todoListId:e.todoListId,events:[],history:!1,historyVersion:0}}componentDidMount(){this.state.todoListId&&a.domainEventsByAggregate(this.state.todoListId).then(e=>{this.setState({events:e})}).catch(console.log)}render(){let e=new r.TodoList(this.state.history?this.state.events.slice(0,this.state.historyVersion):this.state.events);return i.createElement("div",{className:"container"},i.createElement("div",{className:"row"},i.createElement("div",{className:"col-sm-8"},this.state.history?i.createElement(u.HistoryTodoListPanel,{todos:e.todos,completedTodos:e.completedTodos}):i.createElement(p.TodoListPanel,{todos:e.todos,completedTodos:e.completedTodos,addTodo:this.addTodo,completeTodo:this.completeTodo,uncompleteTodo:this.uncompleteTodo,deleteTodo:this.deleteTodo,moveTodoUp:this.moveTodoUp,moveTodoDown:this.moveTodoDown,renameTodo:this.renametodo})),i.createElement("div",{className:"col-sm-4"},i.createElement("h3",null,"Domain Events"),this.state.events.length?i.createElement(d.EventList,{disableOnClickOutside:!this.state.history,events:this.state.events,showHistoryVersion:this.showHistoryVersion,showCurrentVersion:this.showCurrentVersion}):i.createElement(l.EventListEmpty,null))),i.createElement("footer",null,i.createElement("p",null,"© 2017 - Jon Brian Skog")))}}t.Body=m},function(e,t,o){"use strict";!function(){function t(e){return Array.prototype.slice.call(e)}function o(e){return new Promise(function(t,o){e.onsuccess=function(){t(e.result)},e.onerror=function(){o(e.error)}})}function n(e,t,n){var i,s=new Promise(function(s,r){i=e[t].apply(e,n),o(i).then(s,r)});return s.request=i,s}function i(e,t,o){var i=n(e,t,o);return i.then(function(e){if(e)return new l(e,i.request)})}function s(e,t,o){o.forEach(function(o){Object.defineProperty(e.prototype,o,{get:function(){return this[t][o]},set:function(e){this[t][o]=e}})})}function r(e,t,o,i){i.forEach(function(i){i in o.prototype&&(e.prototype[i]=function(){return n(this[t],i,arguments)})})}function a(e,t,o,n){n.forEach(function(n){n in o.prototype&&(e.prototype[n]=function(){return this[t][n].apply(this[t],arguments)})})}function c(e,t,o,n){n.forEach(function(n){n in o.prototype&&(e.prototype[n]=function(){return i(this[t],n,arguments)})})}function d(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function u(e){this._store=e}function p(e){this._tx=e,this.complete=new Promise(function(t,o){e.oncomplete=function(){t()},e.onerror=function(){o(e.error)},e.onabort=function(){o(e.error)}})}function m(e,t,o){this._db=e,this.oldVersion=t,this.transaction=new p(o)}function h(e){this._db=e}s(d,"_index",["name","keyPath","multiEntry","unique"]),r(d,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(d,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(l,"_cursor",["direction","key","primaryKey","value"]),r(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,n=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,n),o(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),u.prototype.createIndex=function(){return new d(this._store.createIndex.apply(this._store,arguments))},u.prototype.index=function(){return new d(this._store.index.apply(this._store,arguments))},s(u,"_store",["name","keyPath","indexNames","autoIncrement"]),r(u,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(u,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(u,"_store",IDBObjectStore,["deleteIndex"]),p.prototype.objectStore=function(){return new u(this._tx.objectStore.apply(this._tx,arguments))},s(p,"_tx",["objectStoreNames","mode"]),a(p,"_tx",IDBTransaction,["abort"]),m.prototype.createObjectStore=function(){return new u(this._db.createObjectStore.apply(this._db,arguments))},s(m,"_db",["name","version","objectStoreNames"]),a(m,"_db",IDBDatabase,["deleteObjectStore","close"]),h.prototype.transaction=function(){return new p(this._db.transaction.apply(this._db,arguments))},s(h,"_db",["name","version","objectStoreNames"]),a(h,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[u,d].forEach(function(o){o.prototype[e.replace("open","iterate")]=function(){var o=t(arguments),n=o[o.length-1],i=this._store||this._index,s=i[e].apply(i,o.slice(0,-1));s.onsuccess=function(){n(s.result)}}})}),[d,u].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var o=this,n=[];return new Promise(function(i){o.iterateCursor(e,function(e){return e?(n.push(e.value),void 0!==t&&n.length==t?void i(n):void e.continue()):void i(n)})})})});var f={open:function(e,t,o){var i=n(indexedDB,"open",[e,t]),s=i.request;return s.onupgradeneeded=function(e){o&&o(new m(s.result,e.oldVersion,s.transaction))},i.then(function(e){return new h(e)})},delete:function(e){return n(indexedDB,"deleteDatabase",[e])}};e.exports=f,e.exports.default=e.exports}()},function(e,t,o){"use strict";function n(e,t,o){return e===t||(e.correspondingElement?e.correspondingElement.classList.contains(o):e.classList.contains(o))}function i(e,t,o){if(e===t)return!0;for(;e.parentNode;){if(n(e,t,o))return!0;e=e.parentNode}return e}function s(e){return document.documentElement.clientWidth<=e.clientX||document.documentElement.clientHeight<=e.clientY}function r(e,t,o,n,r,a){return function(c){r&&c.preventDefault(),a&&c.stopPropagation();var d=c.target;n&&s(c)||i(d,e,o)!==document||t(c)}}t.a=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(2),s=o(16),r=o(6);o(15),window.indexedDB||window.alert("Your browser doesn't support IndexedDB (the browser feature this app uses to store your To-dos). Update your browser to its latest version."),r.todoListId().then(e=>{i.render(n.createElement(s.Body,{todoListId:e}),document.getElementById("app"))}).catch(console.log)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(4),s=o(7),r=o(8),a=o(10);class c extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item list-group-item-success"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(i.CompletedTodoTitle,{title:this.props.todo.name,completionDate:new Date(this.props.todo.completionTimestamp)}),n.createElement(s.TodoActionsPanelBtnGroup,{showDefaultPanel:this.props.showDefaultPanel},n.createElement(r.TodoDeleteBtn,{deleteTodo:this.props.deleteTodo}),n.createElement(a.TodoRenameBtn,{showRenamePanel:this.props.showRenamePanel}))))}}t.CompletedTodoActionsPanel=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(20),s=o(23),r=o(24);var a;!function(e){e[e.DefaultPanel=0]="DefaultPanel",e[e.ActionsPanel=1]="ActionsPanel",e[e.RenamePanel=2]="RenamePanel"}(a||(a={}));class c extends n.PureComponent{constructor(e){super(e),this.uncompleteTodo=(()=>{this.props.uncompleteTodo(this.props.todo.id)}),this.deleteTodo=(()=>{this.props.deleteTodo(this.props.todo.id)}),this.renameTodo=(e=>{this.props.renameTodo(this.props.todo.id,e)}),this.showDefaultPanel=(()=>{this.setState({panel:a.DefaultPanel})}),this.showActionsPanel=(()=>{this.setState({panel:a.ActionsPanel})}),this.showRenamePanel=(()=>{this.setState({panel:a.RenamePanel})}),this.state={panel:a.DefaultPanel}}render(){let e;switch(this.state.panel){case a.DefaultPanel:e=n.createElement(s.CompletedTodoPanel,{todo:this.props.todo,uncompleteTodo:this.uncompleteTodo,showActionsPanel:this.showActionsPanel});break;case a.ActionsPanel:e=n.createElement(i.CompletedTodoActionsPanel,{todo:this.props.todo,deleteTodo:this.deleteTodo,showDefaultPanel:this.showDefaultPanel,showRenamePanel:this.showRenamePanel});break;case a.RenamePanel:e=n.createElement(r.CompletedTodoRenamePanel,{todo:this.props.todo,renameTodo:this.renameTodo,showDefaultPanel:this.showDefaultPanel});break;default:e=null}return e}}t.CompletedTodoListItem=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(21);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(i.CompletedTodoListItem,{key:e.id,todo:e,uncompleteTodo:this.props.uncompleteTodo,deleteTodo:this.props.deleteTodo,renameTodo:this.props.renameTodo})))}}t.CompletedTodoList=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(2),s=o(4),r=o(9);class a extends n.PureComponent{constructor(){super(...arguments),this.btnGroupRef=(e=>{e&&(this.btnGroup=i.findDOMNode(e))}),this.onClick=(e=>{this.btnGroup.contains(e.target)||this.props.uncompleteTodo()})}render(){return n.createElement("a",{onClick:this.onClick,className:"list-group-item list-group-item-success"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(s.CompletedTodoTitle,{title:this.props.todo.name,completionDate:new Date(this.props.todo.completionTimestamp)}),n.createElement(r.TodoPanelBtnGroup,{ref:this.btnGroupRef,showActionsPanel:this.props.showActionsPanel})))}}t.CompletedTodoPanel=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(11);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item list-group-item-success"},n.createElement(i.TodoRenameForm,Object.assign({},this.props)))}}t.CompletedTodoRenamePanel=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);t.EventListEmpty=(()=>n.createElement("p",null,n.createElement("span",{className:"glyphicon glyphicon-exclamation-sign","aria-hidden":"true"})," Add some to-dos to see events"))},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(1);class s extends n.PureComponent{constructor(){super(...arguments),this.showHistory=(e=>{this.props.showHistoryVersion(this.props.event.id)})}render(){return n.createElement("button",{onClick:this.showHistory,className:"list-group-item event-list-item"},this.props.event.id," : ",i.DomainEventType[this.props.event.type])}}t.EventListItem=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(3),s=o(26);class r extends n.PureComponent{constructor(){super(...arguments),this.handleClickOutside=(()=>{this.props.showCurrentVersion()})}render(){return n.createElement("div",{className:"list-group"},this.props.events.map(e=>n.createElement(s.EventListItem,{key:e.id,event:e,showHistoryVersion:this.props.showHistoryVersion})))}}t.EventListInner=r,t.EventList=i.default(r)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(4);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item list-group-item-success"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(i.CompletedTodoTitle,{title:this.props.todo.name,completionDate:new Date(this.props.todo.completionTimestamp)})))}}t.HistoryCompletedTodoListItem=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(28);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(i.HistoryCompletedTodoListItem,{key:e.id,todo:e})))}}t.HistoryCompletedTodoList=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(5);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(i.TodoTitle,{title:this.props.todo.name})))}}t.HistoryTodoListItem=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(29),s=o(32);class r extends n.PureComponent{render(){return n.createElement("div",null,n.createElement("h3",{className:"sr-only"},"To-dos"),n.createElement(s.HistoryTodoList,{todos:this.props.todos}),this.props.completedTodos.length?n.createElement("div",null,n.createElement("h3",{className:"sr-only"},"Completed To-dos"),n.createElement(i.HistoryCompletedTodoList,{todos:this.props.completedTodos})):null)}}t.HistoryTodoListPanel=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(30);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(i.HistoryTodoListItem,{key:e.id,todo:e})))}}t.HistoryTodoList=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(7),s=o(8),r=o(38),a=o(39),c=o(10),d=o(5);class l extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(d.TodoTitle,{title:this.props.todo.name}),n.createElement(i.TodoActionsPanelBtnGroup,{showDefaultPanel:this.props.showDefaultPanel},n.createElement(s.TodoDeleteBtn,{deleteTodo:this.props.deleteTodo}),n.createElement(a.TodoMoveUpBtn,{moveTodoUp:this.props.moveTodoUp}),n.createElement(r.TodoMoveDownBtn,{moveTodoDown:this.props.moveTodoDown}),n.createElement(c.TodoRenameBtn,{showRenamePanel:this.props.showRenamePanel}))))}}t.TodoActionsPanel=l},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{constructor(e){super(e),this.reset=(()=>{this.setState({value:""})}),this.onChange=(e=>{this.setState({value:e.target.value})}),this.onSubmit=(e=>{e.preventDefault();this.props.addTodo(this.state.value);this.reset()}),this.state={value:""}}render(){return n.createElement("form",{role:"form",onSubmit:this.onSubmit},n.createElement("label",{htmlFor:"todoAddInput",className:"sr-only"},"New To-do Name"),n.createElement("div",{className:"input-group"},n.createElement("input",{id:"todoAddInput",name:"name",type:"text",className:"form-control",placeholder:"What do you need to do?",onChange:this.onChange,value:this.state.value,required:!0}),n.createElement("span",{className:"input-group-btn"},n.createElement("button",{type:"submit",className:"btn btn-success","aria-label":"Add To-do"},n.createElement("span",{className:"glyphicon glyphicon-plus","aria-hidden":"true"})))))}}t.TodoAddForm=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(33),s=o(40),r=o(41);var a;!function(e){e[e.DefaultPanel=0]="DefaultPanel",e[e.ActionsPanel=1]="ActionsPanel",e[e.RenamePanel=2]="RenamePanel"}(a||(a={}));class c extends n.PureComponent{constructor(e){super(e),this.completeTodo=(()=>{this.props.completeTodo(this.props.todo.id)}),this.deleteTodo=(()=>{this.props.deleteTodo(this.props.todo.id)}),this.moveTodoUp=(()=>{this.props.moveTodoUp(this.props.todo.id)}),this.moveTodoDown=(()=>{this.props.moveTodoDown(this.props.todo.id)}),this.renameTodo=(e=>{this.props.renameTodo(this.props.todo.id,e)}),this.showDefaultPanel=(()=>{this.setState({panel:a.DefaultPanel})}),this.showActionsPanel=(()=>{this.setState({panel:a.ActionsPanel})}),this.showRenamePanel=(()=>{this.setState({panel:a.RenamePanel})}),this.state={panel:a.DefaultPanel}}render(){let e;switch(this.state.panel){case a.DefaultPanel:e=n.createElement(s.TodoPanel,{todo:this.props.todo,completeTodo:this.completeTodo,showActionsPanel:this.showActionsPanel});break;case a.ActionsPanel:e=n.createElement(i.TodoActionsPanel,{todo:this.props.todo,deleteTodo:this.deleteTodo,moveTodoUp:this.moveTodoUp,moveTodoDown:this.moveTodoDown,showDefaultPanel:this.showDefaultPanel,showRenamePanel:this.showRenamePanel});break;case a.RenamePanel:e=n.createElement(r.TodoRenamePanel,{todo:this.props.todo,renameTodo:this.renameTodo,showDefaultPanel:this.showDefaultPanel});break;default:e=null}return e}}t.TodoListItem=c},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(22),s=o(34),r=o(37);class a extends n.PureComponent{render(){return n.createElement("div",null,n.createElement(s.TodoAddForm,{addTodo:this.props.addTodo}),n.createElement("br",null),n.createElement("h3",{className:"sr-only"},"To-dos"),n.createElement(r.TodoList,{todos:this.props.todos,completeTodo:this.props.completeTodo,deleteTodo:this.props.deleteTodo,moveTodoUp:this.props.moveTodoUp,moveTodoDown:this.props.moveTodoDown,renameTodo:this.props.renameTodo}),this.props.completedTodos.length?n.createElement("div",null,n.createElement("h3",{className:"sr-only"},"Completed To-dos"),n.createElement(i.CompletedTodoList,{todos:this.props.completedTodos,uncompleteTodo:this.props.uncompleteTodo,deleteTodo:this.props.deleteTodo,renameTodo:this.props.renameTodo})):null)}}t.TodoListPanel=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(35);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group"},this.props.todos.map(e=>n.createElement(i.TodoListItem,{key:e.id,todo:e,completeTodo:this.props.completeTodo,deleteTodo:this.props.deleteTodo,moveTodoUp:this.props.moveTodoUp,moveTodoDown:this.props.moveTodoDown,renameTodo:this.props.renameTodo})))}}t.TodoList=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.moveTodoDown,type:"button",className:"btn btn-link","aria-label":"Move down"},n.createElement("span",{className:"glyphicon glyphicon-chevron-down","aria-hidden":"true"}))}}t.TodoMoveDownBtn=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0);class i extends n.PureComponent{render(){return n.createElement("button",{onClick:this.props.moveTodoUp,type:"button",className:"btn btn-link","aria-label":"Move up"},n.createElement("span",{className:"glyphicon glyphicon-chevron-up","aria-hidden":"true"}))}}t.TodoMoveUpBtn=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(2),s=o(9),r=o(5);class a extends n.PureComponent{constructor(){super(...arguments),this.btnGroupRef=(e=>{e&&(this.btnGroup=i.findDOMNode(e))}),this.onClick=(e=>{this.btnGroup.contains(e.target)||this.props.completeTodo()})}render(){return n.createElement("a",{onClick:this.onClick,className:"list-group-item"},n.createElement("div",{className:"todo-list-todo-panel"},n.createElement(r.TodoTitle,{title:this.props.todo.name}),n.createElement(s.TodoPanelBtnGroup,{ref:this.btnGroupRef,showActionsPanel:this.props.showActionsPanel})))}}t.TodoPanel=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(0),i=o(11);class s extends n.PureComponent{render(){return n.createElement("div",{className:"list-group-item"},n.createElement(i.TodoRenameForm,Object.assign({},this.props)))}}t.TodoRenamePanel=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(1);class i{get uncommittedEvents(){return this._uncommittedEvents}get id(){return this._id}init(){this._uncommittedEvents=new Array}constructor(e){this.init();for(const t of e)this[n.DomainEventType[t.type]](t)}applyAndStage(e){this[n.DomainEventType[e.type]](e),this._uncommittedEvents.push(e)}}t.AggregateRoot=i},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(1);class i{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoName=o,this.type=n.DomainEventType.TodoAdded}}t.TodoAdded=i;class s{constructor(e,t){this.aggregateId=e,this.todoId=t,this.type=n.DomainEventType.TodoRemoved}}t.TodoRemoved=s;class r{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoCompletionTimestamp=o,this.type=n.DomainEventType.TodoCompleted}}t.TodoCompleted=r;class a{constructor(e,t){this.aggregateId=e,this.todoId=t,this.type=n.DomainEventType.TodoUncompleted}}t.TodoUncompleted=a;class c{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoName=o,this.type=n.DomainEventType.TodoRenamed}}t.TodoRenamed=c;class d{constructor(e,t,o){this.aggregateId=e,this.todoId=t,this.todoOffset=o,this.type=n.DomainEventType.TodoPositionChanged}}t.TodoPositionChanged=d},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=o(12),i=o(42),s=o(43),r=o(45);class a extends i.AggregateRoot{get todos(){return this._todos.filter(e=>!e.isCompleted)}get completedTodos(){return this._todos.filter(e=>e.isCompleted).sort((e,t)=>t.completionTimestamp-e.completionTimestamp)}init(){super.init(),this._todos=[]}TodoAdded(e){this.id||(this._id=e.aggregateId),this._todos.push(new r.Todo(e.todoId,e.todoName))}TodoRemoved(e){let t=this._todos.findIndex(t=>t.id===e.todoId);-1!==t&&this._todos.splice(t,1)}TodoCompleted(e){let t=this._todos.findIndex(t=>t.id===e.todoId);if(-1!==t){let o=this._todos[t],n=new r.CompletedTodo(o.id,o.name,e.todoCompletionTimestamp);this._todos[t]=n}}TodoUncompleted(e){let t=this._todos.findIndex(t=>t.id===e.todoId);if(-1!==t){let e=this._todos[t],o=new r.Todo(e.id,e.name);this._todos[t]=o}}TodoRenamed(e){let t=this._todos.find(t=>t.id===e.todoId);t&&(t.name=e.todoName)}TodoPositionChanged(e){function t(e,t,o){let n=e[t];e[t]=e[o],e[o]=n}let o=this._todos.reduce((e,t,o)=>{t.isCompleted||e.push(o);return e},[]),n=o.findIndex(t=>this._todos[t].id===e.todoId);if(-1!==n){let i=n+e.todoOffset;if(i<0?i=0:i>o.length-1&&(i=o.length-1),n!==i)if(i<n)for(let e=i;e<n;e++)t(this._todos,o[n],o[e]);else for(let e=i;e>n;e--)t(this._todos,o[n],o[e])}}add(e,t){let o=this.id||n.v4();this.applyAndStage(new s.TodoAdded(o,e,t))}remove(e){this.applyAndStage(new s.TodoRemoved(this.id,e))}complete(e,t){this.applyAndStage(new s.TodoCompleted(this.id,e,t))}uncomplete(e){this.applyAndStage(new s.TodoUncompleted(this.id,e))}rename(e,t){this.applyAndStage(new s.TodoRenamed(this.id,e,t))}changePosition(e,t){this.applyAndStage(new s.TodoPositionChanged(this.id,e,t))}}t.TodoList=a},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class n{constructor(e,t){this.id=e,this.name=t,this.isCompleted=!1}}t.Todo=n;class i extends n{constructor(e,t,o){super(e,t),this.completionTimestamp=o,this.isCompleted=!0}}t.CompletedTodo=i},function(e,t,o){function n(e,t,o){var n=t&&o||0,i=t||[];e=e||{};var r=void 0!==e.clockseq?e.clockseq:c,u=void 0!==e.msecs?e.msecs:(new Date).getTime(),p=void 0!==e.nsecs?e.nsecs:l+1,m=u-d+(p-l)/1e4;if(m<0&&void 0===e.clockseq&&(r=r+1&16383),(m<0||u>d)&&void 0===e.nsecs&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=u,l=p,c=r,u+=122192928e5;var h=(1e4*(268435455&u)+p)%4294967296;i[n++]=h>>>24&255,i[n++]=h>>>16&255,i[n++]=h>>>8&255,i[n++]=255&h;var f=u/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=255&f,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=r>>>8|128,i[n++]=255&r;for(var v=e.node||a,y=0;y<6;++y)i[n+y]=v[y];return t||s(i)}var i=o(14),s=o(13),r=i(),a=[1|r[0],r[1],r[2],r[3],r[4],r[5]],c=16383&(r[6]<<8|r[7]),d=0,l=0;e.exports=n},function(e,t,o){function n(e,t,o){var n=t&&o||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var r=e.random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t)for(var a=0;a<16;++a)t[n+a]=r[a];return t||s(r)}var i=o(14),s=o(13);e.exports=n},function(e,t){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(o=window)}e.exports=o}]);
//# sourceMappingURL=bundle.b821021eb88a34471a23.js.map